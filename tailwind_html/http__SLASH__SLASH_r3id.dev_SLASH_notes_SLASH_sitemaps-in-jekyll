<!doctype html>
<html lang="en" class="light">
  <head>
    <title>Adding Sitemaps to a Jekyll site ||  R3ID</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="last-modified" content="2022-06-28">
    <meta name="description" content="A software engineer based in Hertfordshire who specializes in developing (and occasionally designing) exceptional, high-quality websites and applications.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.1.1/tailwind.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <link rel="stylesheet" href="/assets/css/main.css" media="screen">
    <link rel="stylesheet" href="/assets/css/main.css" media="print">
    <link rel="icon" type="image/png" href="https://r3id.dev/favicon.ico">
  </head>
  <body class="home-page text-gray-500">

    <nav class="max-w-5xl m-auto p-5 flex justify-between border-solid border-b border-gray-100 bg-white dark:border-black dark:bg-blackish sticky top-0 opacity-90 z-10">
  <div class="flex items-center">
    <a href="/" class="transition-colors">
      <i class="far fa-arrow-left text-sm text-glow hover:text-gray-700"></i>
    </a>
  </div>
</nav>




<div class="default-container">
  <div class="pt-20 pb-1 inline-flex overflow-x-auto space-x-2">
		<a href="/">
			<p class="cursor-pointer text-sm text-gray-400 dark:text-gray-600 hover:font-medium hover:text-gray-700 dark:hover:text-gray-300 min-w-max">Home /</p>
		</a>
    <a href="/notes">
			<p class="cursor-pointer text-sm text-gray-400 dark:text-gray-600 hover:font-medium hover:text-gray-700 dark:hover:text-gray-300 min-w-max">Notes to self /</p>
		</a>
		<a href="/notes/sitemaps-in-jekyll">
			<p class="cursor-pointer text-sm text-glow dark:text-glow hover:font-medium hover:text-gray-700 dark:hover:text-gray-300 min-w-max">Adding Sitemaps to a Jekyll site</p>
		</a>
	</div>
	<div class="mb-6">
		<h1 class="pb-2 font-bold text-3xl text-gray-600">Adding Sitemaps to a Jekyll site</h1>
    
      <p class="text-sm italic mb-4">It's a 7 minute read</p>
    
	</div>
  <div class="text-content">
    <p>While working on a Jekyll site you will want to automatically generate a <code class="language-plaintext highlighter-rouge">sitemap.xml</code> which you can submit to Google’s Search Console. While there are plugins for this; it is in fact very easy to make yourself and you can add generation options exactly to your liking.</p>

<p>In todays post we’ll have a look at how a sitemap can be generated by Jekyll with simple Liquid tags.</p>

<div class="image-center">
  <svg width="142px" height="130px" viewBox="0 0 142 130" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
      <g id="sitemap" transform="translate(0.000000, -0.890625)">
        <path d="M94.5565129,11.6804244 C94.6238979,9.13074005 94.0142991,5.31641223 94.7931438,2.89695789 C94.8887365,2.60197902 94.9232125,2.38388294 95,2.17833916 C94.9952987,2.17833916 94.9921645,2.18147723 94.9858962,2.17990819 C78.1192837,1.50051537 61.3764715,2.09204215 44.542768,3.18252254 C44.2779295,3.19978194 44.082043,3.11348493 43.9488401,2.97384068 C43.9566756,3.05072347 43.9723465,3.12289915 43.9598098,3.20762713 C42.6058422,12.1903613 42.7970274,20.8373216 43.8328753,29.8106416 C52.1698054,29.139094 60.8577641,30.085223 69.2338714,29.8530056 C77.5692344,29.6223572 85.8873593,29.0747635 94.1882463,28.2792619 C94.1647399,22.7468391 94.4107734,17.2097092 94.5565129,11.6804244 Z" id="Path"></path>
        <path d="M86.9957843,48.890625 C86.9151431,48.916292 86.8376644,48.9483758 86.7412112,48.9515842 C75.5146964,49.3253604 64.2344208,49.676678 53,49.6317607 C53.7526509,58.2991978 53.6862405,67.102991 53.93607,75.8041161 C62.8303159,75.9741603 71.7245618,75.9003675 80.6140641,75.5217787 C82.8925722,75.4255274 83.5060775,75.7399486 85.136294,74.0122362 C86.5909973,72.4706099 86.461339,72.0952295 86.5736041,70.1429306 C86.7016812,67.9115027 86.8012968,65.6784705 86.8724508,63.4438343 C87.0242459,58.6954326 87.0321519,53.947031 86.9404423,49.1970252 C86.9388611,49.0815236 86.9657415,48.983668 86.9957843,48.890625 Z" id="Path"></path>
        <path d="M28.4108937,97.1886888 C24.7226126,97.1917621 21.0327753,97.1932988 17.3444942,97.1963721 C13.6282009,97.1994455 9.12289554,96.501796 5.48752653,97.2040555 C3.16562132,97.652764 3.03178496,97.7065475 2.46064607,100.192884 C2.00622495,102.176729 2.2879038,104.659992 2.23032304,106.694547 C2.0171186,114.288785 2.11360528,121.869192 2.12605518,129.46343 C2.12605518,129.638611 2.07314313,129.773838 2,129.890625 C12.9917001,129.535654 24.0036312,129.50953 35,129.357399 C34.796133,121.806189 34.592266,114.253441 34.3868427,106.702231 C34.2623438,102.021525 34.9019571,97.1840787 28.4108937,97.1886888 Z" id="Path"></path>
        <path d="M104.436153,97.6761701 C104.07496,105.100428 103.766742,112.481611 104.245122,119.918176 C104.359098,121.691937 104.381572,123.544155 104.691395,125.297917 C104.675342,126.571702 105.020482,127.757799 105.72521,128.857746 C106.81842,128.859284 107.91163,128.859284 109.006446,128.860822 C113.106385,128.863899 117.207931,128.868514 121.30787,128.871591 C125.40781,128.874668 129.509355,128.903897 133.609295,128.88236 C134.482579,128.899282 135.355863,128.890052 136.229147,128.856207 C138.436436,127.742415 139.277614,126.205566 138.752681,124.248737 C138.982239,122.264217 138.523123,119.987404 138.491017,117.978269 C138.380251,110.93707 138.93729,103.926638 140,96.9654351 C128.138428,96.754676 116.281672,96.9885109 104.436153,97.6761701 Z" id="Path"></path>
        <path d="M43.5001868,49.366125 C43.4681868,49.366125 43.4681868,49.415125 43.5001868,49.415125 C43.5311868,49.415125 43.5321868,49.366125 43.5001868,49.366125 Z" id="Path" fill="#000000" fill-rule="nonzero"></path>
        <path d="M46.6909278,50.4992824 C46.5619278,50.3812824 46.4349278,50.2912824 46.2989278,50.1832824 C46.2939278,50.1792824 46.2889278,50.1852824 46.2929278,50.1892824 C46.3989278,50.3232824 46.4919278,50.4532824 46.6089278,50.5812824 C46.6589278,50.6372824 46.7459278,50.5492824 46.6909278,50.4992824 Z" id="Path" fill="#000000" fill-rule="nonzero"></path>
        <path d="M89.980066,49.9412321 C89.9657248,49.2450106 89.2948741,48.9762659 88.7738095,49.1239969 C88.9538716,48.6085101 88.6877621,47.9327195 87.9675139,47.9405775 C82.8014853,47.9971554 77.6243025,48.0631628 72.4471197,48.1637456 C72.5188259,42.9743023 72.1124911,37.613554 71.1038249,32.5168355 C79.5603681,32.2512341 88.0025702,31.6980288 96.4224637,30.8776504 C97.4677797,30.775496 97.5649814,29.307616 96.7092882,29.1143084 C96.9546825,24.9416943 97.0184213,20.7565073 97.1379315,16.5791784 C97.1984834,14.4465089 97.2606287,12.3138395 97.3211805,10.1811701 C97.3482695,9.23663481 96.9610564,5.79167431 97.3004654,4.32850905 C97.400854,4.28450408 97.5012426,4.21692502 97.5952573,4.12105705 C97.6462483,4.06919405 97.6956459,4.01733105 97.7466369,3.96546805 C98.082859,3.62128632 98.086046,3.0712242 97.7466369,2.72704247 C97.6781177,2.6578918 97.6080051,2.58716953 97.5394859,2.51801886 C97.3243675,2.29956562 97.0216082,2.2429878 96.7379707,2.29799401 C96.7809943,1.82179737 96.5021371,1.30002415 95.8759036,1.27487846 C78.8146244,0.600659453 61.5876243,0.720101515 44.58371,2.39071877 C44.0196217,2.44572498 43.7503253,2.92663644 43.7758209,3.36039971 C43.3423971,2.85591417 42.4149978,2.8119092 42.2699921,3.62914435 C40.6701486,12.6957398 40.4661845,22.2212442 42.3257635,31.2721235 C42.2205945,31.5345818 42.2620247,31.8331869 42.5233537,31.9809179 C42.744846,32.3172416 43.2404151,32.3769626 43.5893849,32.2009427 C51.71608,33.5210918 60.6793466,32.8044395 68.8506588,32.6001307 C69.0848988,32.5938442 69.3175454,32.5812714 69.5517854,32.574985 C69.9804288,37.7927171 70.412259,42.9711591 70.676775,48.1998925 C64.9785276,48.3209062 59.2834672,48.4937829 53.602748,48.7672423 C53.2442173,48.78453 53.0163512,48.984124 52.9048083,49.2340093 C52.6211707,49.311018 52.3837437,49.5389009 52.3741829,49.9380888 C52.1256017,58.8915286 52.8299152,67.9392648 53.1199267,76.8927046 C53.1358614,77.3830457 53.5214811,77.7759472 54.0250175,77.7853768 C60.0148698,77.9079621 66.0047221,77.9299646 71.9929809,77.8168089 C74.9871103,77.7602311 77.9812397,77.6722212 80.9737757,77.5543507 C82.7489008,77.4836285 86.4967414,78.039977 88.0870241,76.9649985 C90.4023354,75.3996788 89.6279092,70.2998171 89.7410455,68.0068439 C90.0406178,61.9844494 90.0995762,55.9636265 89.980066,49.9412321 Z M69.6920108,30.7833541 C61.1749156,31.0159518 52.3407201,30.0682733 43.8634617,30.7409207 C42.8117717,21.7529056 42.615775,13.0917845 43.9925327,4.09433975 C44.0052805,4.00947302 43.9893458,3.93717914 43.9813784,3.86017045 C44.1168234,4.00004339 44.3160071,4.08648172 44.5853034,4.06919405 C61.7023541,2.97692783 78.7269835,2.38443234 95.8774971,3.06493777 C95.8822775,3.06493777 95.8854644,3.06179456 95.8918383,3.06336617 C95.8137583,3.26924656 95.7787019,3.48769981 95.6815003,3.78316175 C94.8879524,6.20657831 95.5094056,10.0271527 95.4408864,12.5810125 C95.2926937,18.1193523 95.042519,23.6671218 95.066421,29.2070332 C86.6258124,30.0038374 78.1676757,30.5507564 69.6920108,30.7833541 Z M88.0997718,63.8986656 C88.0280657,66.0879128 87.9276771,68.2755885 87.7986061,70.4616925 C87.6854697,72.3727655 87.8161342,72.7420929 86.3501422,74.2524064 C84.707275,75.9450261 84.0906023,75.6369913 81.7928191,75.7312877 C72.8359263,76.1021867 63.8710662,76.1744806 54.9077996,76.0078904 C54.6560314,67.483499 54.7229572,58.8585249 53.9644656,50.3671373 C65.2860673,50.4111423 76.6522861,50.0685322 87.9675139,49.7007763 C88.0647155,49.6976331 88.1427955,49.6677726 88.2240625,49.6410553 C88.1937865,49.7322085 88.1651041,49.8265048 88.168291,49.9412321 C88.2607123,54.5947576 88.2527449,59.2467116 88.0997718,63.8986656 Z" id="Shape" fill="#000000" fill-rule="nonzero"></path>
        <path d="M84.048166,93.9990132 C80.4516862,94.0292102 76.8567935,94.0991402 73.2619008,94.2056244 C69.3908441,94.3200552 65.5213747,94.4805762 61.6550795,94.6840087 C59.4695752,94.8000288 56.0286359,94.2342321 54.0510482,95.2132511 C50.9323002,96.7580669 52.3115328,103.026332 52.260744,105.799689 C52.1194877,113.418873 52.1210749,121.038057 52.2337625,128.657241 C52.2512211,129.8238 54.0621582,129.826978 54.0446996,128.657241 C53.963755,123.215421 53.9351863,117.772011 53.9812136,112.330191 C54.0018466,109.881054 54.0367638,107.431917 54.0859655,104.982781 C54.112947,103.622325 54.1431028,102.26187 54.1780201,100.901415 C54.2272217,99.0196645 53.7605999,98.1391831 55.4763081,97.2094328 C57.5888035,96.0651249 60.9440367,96.5260267 63.310476,96.4100066 C66.0737025,96.2733253 68.8369291,96.1588945 71.6017428,96.0667142 C74.3665565,95.9745338 77.1313703,95.9061932 79.8977711,95.860103 C81.3785812,95.8346739 86.1225699,95.0034613 87.0700979,96.341666 C87.8874796,97.4955098 86.8764657,102.106117 86.8272641,103.569878 C86.7367966,106.246287 86.6479162,108.924286 86.5574487,111.600695 C86.4669812,114.277104 86.3781009,116.955103 86.2876334,119.631512 C86.2320831,121.297116 86.9367773,125.488144 86.0447995,126.859724 C84.9385566,128.561882 80.5485022,127.741795 78.7693081,127.746563 C76.1044848,127.754509 73.4380743,127.757688 70.773251,127.768813 C65.4420172,127.791064 60.1044348,127.741795 54.7811368,128.040586 C53.9145534,128.089855 53.9113791,129.348594 54.7811368,129.391505 C61.9629864,129.75387 69.1797533,129.579045 76.3695387,129.558384 C78.9978576,129.550437 83.3466461,130.35781 85.8813232,129.483686 C86.9034472,129.130857 87.2557943,128.935372 87.7335262,127.878476 C88.5699538,126.025333 87.9969929,122.517711 88.0668275,120.432528 C88.1922123,116.684919 88.3191842,112.93731 88.444569,109.189702 C88.5524951,105.977693 88.6604213,102.765684 88.7683474,99.5520856 C88.8127876,98.2472566 89.466693,95.7456722 88.3572758,94.5775245 C87.3621333,93.5301648 85.2385278,93.9894773 84.048166,93.9990132 Z" id="Path" fill="#000000" fill-rule="nonzero"></path>
        <path d="M36.0933305,98.2960606 C35.8079692,96.4026724 35.0811651,94.821709 33.1198975,94.1952895 C31.4550273,93.6630685 29.4007415,93.989623 27.7059162,93.991193 C25.0367635,93.992763 22.3676108,93.9943329 19.6984581,93.9974729 C14.6297482,94.0006128 9.55000213,93.9048444 4.48286876,94.0084627 C2.59254738,94.047712 1.23195743,94.1340606 0.623396921,96.1499067 C-0.062416089,98.4232285 0.308080595,101.494097 0.23555784,103.836497 C0.14884585,106.604361 0.0857825845,109.373794 0.0495212069,112.143228 C-0.0214249666,117.677385 -0.0450736911,123.228812 0.180377482,128.759829 C0.199296462,129.230821 0.524072278,129.485156 0.883532891,129.549525 C0.542991258,130.042497 0.749523452,130.885573 1.53466111,130.887143 C13.0515899,130.927962 24.5779783,130.599838 36.0933305,130.43028 C36.671936,130.422431 36.962027,129.968708 36.962027,129.521266 C36.9762162,129.452187 37.0014415,129.389388 36.9999355,129.309319 C36.8532429,123.836391 36.7066208,118.363463 36.5599987,112.892105 C36.4322956,108.117816 36.8059454,103.018541 36.0933305,98.2960606 Z M1.75222937,129.194711 C1.82632871,129.075393 1.87993248,128.937236 1.87993248,128.758259 C1.86731983,120.999449 1.76957177,113.253199 1.98556345,105.49596 C2.04389697,103.417315 1.7585357,100.878667 2.21889753,98.8534013 C2.79750299,96.3131839 2.93308901,96.2566649 5.28534881,95.7998026 C8.96824351,95.0823246 13.5324473,95.7935227 17.2973243,95.7919527 C21.0338227,95.7888128 24.7703212,95.7872428 28.5083963,95.7841028 C35.0843183,95.7793929 34.4363432,100.72167 34.5656229,105.505379 C34.7721551,113.22023 34.9786873,120.93665 35.1867961,128.6515 C24.0419405,128.805358 12.8876254,128.832047 1.75222937,129.194711 Z" id="Shape" fill="#000000" fill-rule="nonzero"></path>
        <path d="M140.416054,113.505859 C140.513365,107.34726 141.064267,101.223735 141.985577,95.1368781 C142.073471,94.5533816 141.756427,93.9985816 141.12234,93.9858276 C129.198674,93.7355299 117.281286,93.9794506 105.376455,94.7096183 C105.26188,94.0224954 104.091016,93.8774184 103.984288,94.650631 C102.606247,104.710366 102.805576,115.065038 103.78025,125.156658 C103.974871,127.168605 103.64841,129.68593 105.737445,130.591466 C107.182976,131.216413 109.797801,130.66799 111.392436,130.669584 C114.332153,130.672773 117.273439,130.674367 120.213155,130.677555 C125.422402,130.682338 130.727389,130.977275 135.927219,130.677555 C138.046075,130.554798 139.938919,130.076522 140.626371,127.854134 C141.210233,125.968133 140.621662,123.560811 140.533769,121.634954 C140.412915,118.924724 140.373677,116.216088 140.416054,113.505859 Z M138.62052,117.569609 C138.651911,119.651703 139.099225,122.009603 138.876352,124.067783 C139.388017,126.095673 138.565587,127.686737 136.409062,128.84257 C135.555242,128.877816 134.701421,128.885615 133.847601,128.869673 C129.839039,128.891992 125.828908,128.861701 121.820347,128.858513 C117.811785,128.855324 113.801654,128.850542 109.793092,128.847353 C108.724247,128.845759 107.655402,128.845759 106.584987,128.844165 C105.895967,127.704274 105.558519,126.475105 105.574215,125.155064 C105.271297,123.337616 105.249323,121.418135 105.137887,119.579962 C104.670169,111.87175 104.969948,104.224119 105.324661,96.530255 C116.90617,95.817624 128.498667,95.5752976 140.10058,95.792116 C139.056848,103.007704 138.512223,110.272714 138.62052,117.569609 Z" id="Shape" fill="#000000" fill-rule="nonzero"></path>
        <path d="M49.3825128,62.5056557 C34.0304087,58.9229199 16.5605509,71.4990221 17.6049446,87.0796486 C17.3442485,86.7796625 17.0771154,86.4858937 16.8244655,86.1765816 C16.1147928,85.3046012 15.6625977,84.4248491 14.6133763,83.9445604 C14.3494617,83.8233225 13.988993,83.9632124 14,84.2834049 C14.0855471,86.5371866 16.9435489,89.0676395 18.4642762,90.6359608 C18.8987697,91.0836085 19.5489008,90.8877626 19.8804032,90.4603212 C21.7149314,88.0884102 23.6926815,85.8563891 25.6639947,83.5948357 C26.3929782,82.7586049 25.1989257,81.5539974 24.400745,82.3746849 C22.5517337,84.2787419 20.8604275,86.3320148 19.2302722,88.4163743 C19.7854583,81.2990869 21.50734,74.9216617 27.2233436,69.8358866 C33.2370557,64.485875 41.0418466,63.017031 48.9270993,64.0941833 C49.9811483,64.2402905 50.4800113,62.7621205 49.3825128,62.5056557 Z" id="Path" fill="#000000" fill-rule="nonzero"></path>
        <path d="M121.958071,86.128996 C121.171875,85.2330816 120.340936,84.3889451 119.404531,83.5840342 C118.627923,82.9156288 117.485381,83.745644 117.972759,84.6682319 C119.128084,86.8585935 120.654136,88.4574319 122.784217,89.7660004 C123.29077,90.0766677 123.965109,89.7722765 124.123307,89.2309622 C124.81842,86.8476103 125.996117,85.0432293 127.744285,83.2702289 C128.522491,82.4810083 127.352785,81.357585 126.526639,82.0730613 C125.459202,82.9987872 124.613881,84.0013954 123.937944,85.1075594 C125.398479,68.6500358 106.857349,58.9252068 91.5313133,61.2254003 C90.7067659,61.3493534 90.8953251,62.7128378 91.7294603,62.6594909 C99.5706505,62.1574023 107.581224,63.070576 113.981055,67.9486807 C119.657009,72.2791951 122.89128,79.1687924 121.958071,86.128996 Z" id="Path" fill="#000000" fill-rule="nonzero"></path>
        <path d="M66.538451,87.3902214 C65.7691857,86.7770918 64.6184798,87.5311174 65.1244074,88.4492635 C66.0979589,90.2158819 67.3827276,91.5923269 69.0601089,92.7551056 C69.5628444,93.105023 70.2219867,92.7225911 70.3911612,92.2302295 C71.1061629,90.1431115 72.2089892,88.5483552 73.7475197,86.9505022 C74.5247649,86.1438342 73.3357553,84.9934421 72.4994587,85.7412744 C71.4828156,86.651679 70.6624788,87.6874964 69.9937607,88.814664 C69.8644858,85.9688755 69.7208471,83.087476 69.1861918,80.3221995 C69.0505329,79.6208164 68.021122,79.8468692 67.9732424,80.4816751 C67.7641682,83.2484999 67.9588785,86.0896435 68.1583768,88.895176 C67.6588332,88.3641066 67.1273698,87.8609068 66.538451,87.3902214 Z" id="Path" fill="#000000" fill-rule="nonzero"></path>
      </g>
    </g>
  </svg>
</div>

<h2 id="generating-a-basic-sitemapxml-with-jekyll">Generating a basic sitemap.xml with Jekyll</h2>

<p>Let’s start off by creating the file <code class="language-plaintext highlighter-rouge">sitemap.xml</code> in the root directory of your Jekyll site. Add the front matter to the top, so that Liquid will parse the template. We’ll be adding Liquid tags in a minute, and without front matter they’ll be ignored:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: null
---
</code></pre></div></div>

<p>Now we build the framework for our sitemap. It must have an XML header and a <code class="language-plaintext highlighter-rouge">&lt;urlset&gt;</code> element. Inside that element, we will loop through all of our posts:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
---
layout: null
---
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"&gt;
  {% for post in site.posts %}
  {% endfor %}
&lt;/urlset&gt;

</code></pre></div></div>

<p>You can have Jekyll build your site right away and see the sitemap.xml file appear in the <code class="language-plaintext highlighter-rouge">_site</code> folder.
Let’s add <code class="language-plaintext highlighter-rouge">&lt;url&gt;</code> elements for all our posts now, but only for published posts:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&lt;urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"&gt;
  {% for post in site.posts %}
    {% unless post.published == false %}    
    &lt;url&gt;
      &lt;loc&gt;{{ site.url }}{{ post.url }}&lt;/loc&gt;
      &lt;lastmod&gt;{{ post.date | date_to_xmlschema }}&lt;/lastmod&gt;
      &lt;changefreq&gt;monthly&lt;/changefreq&gt;
      &lt;priority&gt;0.5&lt;/priority&gt;
    &lt;/url&gt;
    {% endunless %}
  {% endfor %}
&lt;/urlset&gt;

</code></pre></div></div>

<p>This will generate a sitemap of all of our posts, using the each post’s publication date as the value for the <code class="language-plaintext highlighter-rouge">&lt;lastmod&gt;</code> element, and setting the change frequency and priority to <code class="language-plaintext highlighter-rouge">monthly</code> and <code class="language-plaintext highlighter-rouge">0.5</code>, respectively.</p>

<p>We can add static pages to our <code class="language-plaintext highlighter-rouge">sitemap.xml</code>, too. While doing this, we’ll take care to remove the <code class="language-plaintext highlighter-rouge">index.html</code> from the home page:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
  {% for page in site.pages %}
  &lt;url&gt;
    &lt;loc&gt;{{ site.url }}{{ page.url | remove: "index.html" }}&lt;/loc&gt;
    {% if page.date %}
      &lt;lastmod&gt;{{ page.date | date_to_xmlschema }}&lt;/lastmod&gt;
    {% else %}
      &lt;lastmod&gt;{{ site.time | date_to_xmlschema }}&lt;/lastmod&gt;
    {% endif %}
    &lt;changefreq&gt;monthly&lt;/changefreq&gt;
    &lt;priority&gt;0.3&lt;/priority&gt;
  &lt;/url&gt;
  {% endfor %}

</code></pre></div></div>

<p>Note that pages don’t usually have dates associated with them, so unless a date is present, we’ll use the site’s update time.</p>

<h2 id="generating-a-sitemapxml-with-custom-post-inclusion-customisable-change-frequency-and-priority">Generating a sitemap.xml with custom post inclusion, customisable change frequency and priority</h2>

<p>There may be some published posts or pages that we don’t want to show up in our sitemap. Also, we may want to give certain content a higher priority. Ideally, these things are configured through the YAML front matter of each post and page:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
sitemap:
  lastmod: 2018-05-25
  priority: 0.7
  changefreq: 'weekly'
---
or
---
sitemap:
  exclude: 'yes'
---
</code></pre></div></div>

<p>We can add some conditional logic to our <code class="language-plaintext highlighter-rouge">sitemap.xml</code> to use these attributes, if present. Note that we add an <code class="language-plaintext highlighter-rouge">exclude</code> attribute to the sitemap’s own front matter too, to prevent it from including itself.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
---
layout: null
sitemap:
  exclude: 'yes'
---
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"&gt;
  {% for post in site.posts %}
    {% unless post.published == false %}
    &lt;url&gt;
      &lt;loc&gt;{{ site.url }}{{ post.url }}&lt;/loc&gt;
      {% if post.sitemap.lastmod %}
        &lt;lastmod&gt;{{ post.sitemap.lastmod | date: "%Y-%m-%d" }}&lt;/lastmod&gt;
      {% elsif post.date %}
        &lt;lastmod&gt;{{ post.date | date_to_xmlschema }}&lt;/lastmod&gt;
      {% else %}
        &lt;lastmod&gt;{{ site.time | date_to_xmlschema }}&lt;/lastmod&gt;
      {% endif %}
      {% if post.sitemap.changefreq %}
        &lt;changefreq&gt;{{ post.sitemap.changefreq }}&lt;/changefreq&gt;
      {% else %}
        &lt;changefreq&gt;monthly&lt;/changefreq&gt;
      {% endif %}
      {% if post.sitemap.priority %}
        &lt;priority&gt;{{ post.sitemap.priority }}&lt;/priority&gt;
      {% else %}
        &lt;priority&gt;0.5&lt;/priority&gt;
      {% endif %}
    &lt;/url&gt;
    {% endunless %}
  {% endfor %}
  {% for page in site.pages %}
    {% unless page.sitemap.exclude == "yes" or page.name == "feed.xml" %}
    &lt;url&gt;
      &lt;loc&gt;{{ site.url }}{{ page.url | remove: "index.html" }}&lt;/loc&gt;
      {% if page.sitemap.lastmod %}
        &lt;lastmod&gt;{{ page.sitemap.lastmod | date: "%Y-%m-%d" }}&lt;/lastmod&gt;
      {% elsif page.date %}
        &lt;lastmod&gt;{{ page.date | date_to_xmlschema }}&lt;/lastmod&gt;
      {% else %}
        &lt;lastmod&gt;{{ site.time | date_to_xmlschema }}&lt;/lastmod&gt;
      {% endif %}
      {% if page.sitemap.changefreq %}
        &lt;changefreq&gt;{{ page.sitemap.changefreq }}&lt;/changefreq&gt;
      {% else %}
        &lt;changefreq&gt;monthly&lt;/changefreq&gt;
      {% endif %}
      {% if page.sitemap.priority %}
        &lt;priority&gt;{{ page.sitemap.priority }}&lt;/priority&gt;
      {% else %}
        &lt;priority&gt;0.3&lt;/priority&gt;
      {% endif %}
    &lt;/url&gt;
    {% endunless %}
  {% endfor %}
&lt;/urlset&gt;

</code></pre></div></div>

<p>Note, also, that I’ve added <code class="language-plaintext highlighter-rouge">feed.xml</code> as a special case of a file to exclude from the sitemap. This file is generated by the Jekyll Atom feed plugin, and we don’t have access to its YAML front matter to give it an <code class="language-plaintext highlighter-rouge">exclude</code> attribute.</p>

  </div>
</div>


    <div class="py-20 grid justify-center">
  <div class="w-full flex align-middle space-x-4">
    <a href="https://www.linkedin.com/in/alanr3id/" title="LinkedIn">
      <i class="fab fa-linkedin-in text-xl text-blue-600"></i>
    </a>
    <a href="https://twitter.com/alan_r3id" target="_blank" title="Twitter">
      <i class="fab fa-twitter text-xl text-blue-300"></i>
    </a>
    <a href="https://dribbble.com/r3id" target="_blank" title="Dribbble">
      <i class="fab fa-dribbble text-xl text-pink-600"></i>
    </a>
    <a href="https://github.com/r3id" target="_blank" title="GitHub">
      <i class="fab fa-github text-xl text-black"></i>
    </a>
    <a href="https://medium.com/@r3id" target="_blank" title="Medium">
      <i class="fab fa-medium text-xl text-black"></i>
    </a>
  </div>
  <p class="pt-5 pb-5 text-xs font-medium text-center text-gray-400 dark:text-gray-200">
    <a href="/privacy">Privacy</a>
  </p>
  <p class="pt-5 pb-5 text-xs font-medium text-center text-gray-300 dark:text-gray-200">
    © 2021 Alan Reid
  </p>
</div>


    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-68933763-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-68933763-1');
    </script>
  </body>
</html>
