<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="google-site-verification" content="UqdV8yoQ42KOiR1VvsczA1m8Eeb0potYnKQ_CBQILJ8" />
<title>Taylor/Anne Arundel Properties/Heritage Financial and Title Employee Login</title>
<!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet" type="text/css" /> -->
<script src="https://unpkg.com/tailwindcss-jit-cdn"></script>
<link href="https://annearundelproperties.net/new/favicon.ico" rel="shortcut icon" type="image/x-icon" />
<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-rqn26AG5Pj86AF4SO72RK5fyefcQ/x32DNQfChxWvbXIyXFePlEktwD18fEz+kQU" crossorigin="anonymous">
<script src="https://unpkg.com/alpinejs@3.1.1/dist/cdn.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="https://annearundelproperties.net/new/scripts/jquery-ui-1.10.3.custom.min.js"></script>

<script type="text/javascript">

    window.reset_password = function() {
        return {
            show_modal: false,
            init() {
                            },
        }
    }

</script>
</head>
<body>
<div class="bg-blue-500 w-full min-h-screen text-white pt-6 xl:py-24 pb-12"
x-data="reset_password()">

    <div class="flex items-center h-full mx-4 md:mx-12 lg:mx-24">

        <div class="w-full">

            <div class="mb-6 inline-block xl:hidden w-full">
                <img src="/new/images/BG.png" class="max-w-xs mx-auto">
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8 w-full">

                <div class="border-2 rounded shadow p-6 bg-gray-800 bg-opacity-20">
                    <div class="pb-2 border-b border-white flex justify-between items-end">
                        <div class="text-xl font-semibold">Back At You</div>
                        <div><a href="https://www.tpagentportal.com" target="_blank">www.TPAgentPortal.com</a></div>
                    </div>
                    <div class="pt-4">
                        <div class="mt-4 mb-8 text-center">
                            This is our new internal system for our agents.
                        </div>
                        <a href="https://www.tpagentportal.com" class="p-4 block text-xl text-center bg-blue-700 hover:bg-blue-800 focus:ring-blue-800 cursor-pointer border border-transparent font-medium rounded shadow-md hover:shadow-lg text-white whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-offset-2" target="_blank">Go To Back At You</a>
                    </div>
                </div>

                <div class="border-2 rounded shadow p-6 bg-gray-800 bg-opacity-20">
                    <div class="pb-2 border-b border-white flex justify-between items-end">
                        <div class="text-xl font-semibold">SkySlope</div>
                        <div><a href="https://app.skyslope.com" target="_blank">https://app.skyslope.com</a></div>
                    </div>
                    <div class="pt-4">
                        <div class="mt-4 mb-8 text-center">
                            This is our document management system.
                        </div>
                        <a href="https://app.skyslope.com" class="p-4 block text-xl text-center bg-blue-700 hover:bg-blue-800 focus:ring-blue-800 cursor-pointer border border-transparent font-medium rounded shadow-md hover:shadow-lg text-white whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-offset-2" target="_blank">Go To SkySlope</a>
                    </div>
                </div>

                <div class="border-2 rounded shadow p-6 bg-gray-800 bg-opacity-20">
                    <div class="pb-2 border-b border-white flex justify-between items-end">
                        <div class="text-xl font-semibold">Old Internal System</div>
                        <div>Archives</div>
                    </div>
                    <div class="pt-4"
                    x-data="{ show_forgot_password: false }">
                        <div class="mt-4 mb-8 text-center">
                            Login to our old internal system used mainly for archives.
                        </div>

                        <form>

                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div>
                                    <label for="em" class="block text-sm font-medium">Email</label>
                                    <div class="mt-1">
                                        <input type="email" name="em" id="em" class="p-3 text-gray-600 shadow-sm focus:ring-4 focus:ring-blue-200 focus:border-blue-200 block w-full sm:text-sm border-gray-300 rounded-md" value="" required>
                                    </div>
                                </div>
                                <div>
                                    <label for="pw" class="block text-sm font-medium">Password</label>
                                    <div class="mt-1">
                                        <input type="password" name="id" id="pw" class="p-3 text-gray-600 shadow-sm focus:ring-4 focus:ring-blue-200 focus:border-blue-200 block w-full sm:text-sm border-gray-300 rounded-md" required>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-4 flex items-center justify-around">
                                <button type="submit" id="login_button" class="py-2 px-6 text-xl text-center bg-blue-700 hover:bg-blue-800 focus:ring-blue-800 cursor-pointer border border-transparent font-medium rounded shadow-md hover:shadow-lg text-white whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-offset-2">Login</button>
                            </div>

                            <div id="error_div" class="my-4 rounded-md bg-red-50 text-red-700 p-3 text-center" style="display:none">
                                <div id="error_div_text"></div>
                            </div>
                            <div class="mt-4">
                                Forgot your password? Click <a href="javascript:void(0)" class="text-yellow-100" id="forgot_password_button" @click="show_forgot_password = true">Here</a>
                            </div>

                        </form>

                        <div id="forgot_password_div" class="bg-white rounded-md text-gray-600 py-3 px-6 mt-4"
                        x-show="show_forgot_password">
                            <form>
                                <div class="my-3 text-sm">
                                    Enter your email address to have your password reset. An email will be sent to you with further instructions.
                                </div>
                                <div>
                                    <label for="forgot_email" class="block text-sm font-medium">Email</label>
                                    <input type="email" name="forgot_email" id="forgot_email" class="text-gray-600 shadow-sm focus:ring-4 focus:ring-blue-200 focus:border-blue-200 block w-full sm:text-sm border-gray-300 rounded-md" required>
                                </div>
                                <div class="my-4 flex items-center justify-around">
                                    <button type="submit" id="reset_password_button" class="py-2 px-6 text-xl text-center bg-blue-700 hover:bg-blue-800 focus:ring-blue-800 cursor-pointer border border-transparent font-medium rounded shadow-md hover:shadow-lg text-white whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-offset-2">Reset Password</button>
                                </div>
                            </form>

                            <div id="success" class="rounded-md bg-green-50 text-green-700 p-3 text-sm">An email has been sent to reset your password.</div>

                            <div id="fail" class="rounded-md bg-red-50 text-red-700 p-3 text-sm">Invalid Email Address</div>

                        </div>

                    </div>
                </div>

            </div>


            <div class="mt-24 hidden xl:inline-block w-full">
                <img src="/new/images/BG.png" class="max-w-2xl mx-auto">
            </div>

        </div>

    </div>

    <div class="fixed z-10 inset-0 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true"
    x-transition
    x-show="show_modal">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">

            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity opacity-100" aria-hidden="true"></div>

            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

            <div class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6 opacity-100 translate-y-0 sm:scale-100 text-gray-600"
            @click.outside="show_modal = false">

                <div class="flex justify-between border-b mb-4 pb-2">
                    <div class="text-xl">Reset Password</div>
                    <a href="javascript:void(0)" @click="show_modal = false"><i class="fal fa-times fa-2x text-red-600"></i></a>
                </div>

                <div class="p-2">

                    <div class="text-sm mb-3">
                        Enter a permanent password.  <br>
                        Must be a minimum of 6 characters
                    </div>

                    <form>

                        <div>
                            <label for="pw1" class="block text-sm font-medium">Enter New Password</label>
                            <input type="password" name="pw1" id="pw1" class="text-gray-600 shadow-sm focus:ring-4 focus:ring-blue-200 focus:border-blue-200 block w-full sm:text-sm border-gray-300 rounded-md" required>
                        </div>

                        <div class="my-4">
                            <label for="pw2" class="block text-sm font-medium">Re-Enter Password</label>
                            <input type="password" name="pw2" id="pw2" class="text-gray-600 shadow-sm focus:ring-4 focus:ring-blue-200 focus:border-blue-200 block w-full sm:text-sm border-gray-300 rounded-md" required>
                        </div>

                        <div class="mb-3">
                            <button type="submit" id="set_password_button" class="py-2 px-6 text-xl text-center bg-blue-700 hover:bg-blue-800 focus:ring-blue-800 cursor-pointer border border-transparent font-medium rounded shadow-md hover:shadow-lg text-white whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-offset-2">Reset Password</button>
                        </div>

                        <div class="reset_error rounded-md bg-red-50 text-red-700 p-3 text-sm">
                            <div id="reset_error_text"></div>
                        </div>
                        <div class="reset_success rounded-md bg-green-50 text-green-700 p-3 text-sm">Your password has been set. Logging in...</div>

                    </form>

                </div>

            </div>
        </div>
    </div>


</div>



<script type="text/javascript">

    $(document).ready(function(){
        $.getScript('/new/scripts/common.js');


        $(document).keypress(function(e) {
            if(e.which == 13) {
                login();
            }
        });
        $('#login_button').click(function(e){
            e.preventDefault();
            login();
        });

        $('#fail, #success, .reset_error, .reset_success').hide();





        $('#set_password_button').click(function(e){

            e.preventDefault();
            $('.reset_error').hide();
            var pw1 = $('#pw1').val();
            var pw2 = $('#pw2').val();
            if(pw1 == '' || pw2 == '') {
                $('.reset_error').fadeIn('slow');
                $('#reset_error_text').text('You must enter your new password twice');
                return false;
            }
            if(pw1 != pw2) {
                $('.reset_error').fadeIn('slow');
                $('#reset_error_text').text('Your passwords do not match');
                return false;
            }
            if(pw1.length < 6 || pw2.length < 6) {
                $('.reset_error').fadeIn('slow');
                $('#reset_error_text').text('Your password must be atleast 6 characters');
                return false;
            }

            var email = $('#em').val();
            $.ajax({
                type: 'POST',
                data: { pw: pw1, agent_id: '', email: email },
                url: '/new/ajax/login/set_password.php',
                success: function(){
                    $('.reset_success').show();
                    setTimeout(function(){
                        $('#pw').val($('#pw2').val());
                        login();
                    }, 1000);
                }
            });
        });



        $('#reset_password_button').click(function(e){
            e.preventDefault();
            $('#fail').hide();
            var email = $('#forgot_email').val();
            if(email != '') {
                $.ajax({
                    type: 'POST',
                    data: { email: email },
                    url: '/new/ajax/login/forgot_password.php',
                    success: function(response){
                        if(response.match(/yes/)) {
                            $('#success').show();
                        } else {
                            $('#fail').show();
                        }
                    }

                });
            }
        });

    });


    function login(){

        $('#error_div').hide();
        $('#error_div_text').html('');
        $('input').removeClass('error_input');
        var em = $('#em').val();
        var pw = $('#pw').val();

        var rm = 'yes';

        $.ajax({
            type: 'POST',
            data: { em: em, pw: pw, rm: rm, referrer: '', admin_user_id: '', admin_referrer: '' },
            url: '/new/ajax/login/login.php',
            success: function(response){
                console.log(response);

                r = $($.parseHTML(response));
                var e = $(r).filter('#error');
                if(e.length > 0) {
                    $('#error_div').fadeIn('slow');
                    $('#error_div_text').html(e.text());
                    if(e.text().match(/email/)) {
                        $('#em').addClass('error_input');
                    } else if(e.text().match(/password/)) {
                        $('#pw').addClass('error_input');
                    }
                    $(document).not($('#error_div')).click(function(){
                        $('#error_div').hide();
                    });
                } else {
                    window.location = $(r).filter('#goto').text();
                }
            }
        });
    }

</script>
</body>
</html>
