<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>

    <!-- Favicon -->
    <link href="/static/images/favicon.png?v=3" rel="icon" type="image/png">

    <!-- Basic Page Needs
        ================================================== -->
    <title>花叮网 - 在花叮创建属于你的社交圈</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="花叮网、花叮、交友、男女交友、花叮交友、游戏、视频、公共主页、好友、小组、推荐小组、花叮视频、花叮短视频、收藏夹、招聘求职、花叮热点话题、花叮焦点、热点杂谈、我要爆料、日常分享、花叮群聊、标记好友、感受活动、注册花叮、搜索、搜索花叮网">
    <meta name="description" content="花叮网，全国首家集交友、视频、游戏、资讯于一体的娱乐资讯聚合综合性网站。信息综合领导者，打造一体式分享和交流的平台，汇集个人、社交圈、休闲娱乐、本地资讯，坚持用户需求第一原则，为用户打造最大最全的社交资讯网站，提供更多资源和更便捷好用的资讯获取方式。">

    <!-- icons
    ================================================== -->
    <link rel="stylesheet" href="/static/css/icons.css">

    <!-- CSS
    ================================================== -->
    <link rel="stylesheet" href="/static/css/uikit3.css">
    <link rel="stylesheet" href="/static/css/style.css?v=4">
    <link href="/static/css/tailwind.min.css" rel="stylesheet">

    <style>
        .search-last-item .glyph.fs1 {
            background-color: #227ef7;
            color: #fff;
        }
        .header_search .header_search_dropdown ul.search-last-item .list-name {
            color: #227ef7;
        }
    </style>
    
<link rel="stylesheet" href="/static/css/share.min.css">
<style>

    ::-webkit-scrollbar {
        width: 6px;
    }

    ::-webkit-scrollbar-track {
        border-radius: 0;
    }

    ::-webkit-scrollbar-thumb {
        margin: 2px;
        border-radius: 10px;
        background: rgba(0, 0, 0, 0.2);
    }

    .create-post.is-story .uk-modal-dialog {
        width: 100%;
    }

    #postContent > .card {
        position: relative;
    }
</style>


</head>
<body>


<div id="wrapper" >

    <!-- Header -->
    

    <!-- sidebar -->
    <div class="sidebar">

        
	
       
        <!-- sidebar overly for mobile -->
        <div class="side_overly" uk-toggle="target: #wrapper ; cls: is-collapse is-active"></div>

    </div>

    <!-- Main Contents -->
   <div class="min-h-screen">
                <div class="space-y-7 post-main">

                                        <!-- create post -->
                    <div class="card lg:mx-0 p-4">
                        <div class="flex space-x-3">
                            <input onclick="gotoLogin();" placeholder="登录分享你的新鲜事" class="bg-gray-100 hover:bg-gray-200 flex-1 h-10 px-6 rounded-full">
                        </div>
                        <div class="grid grid-flow-col pt-3 -mx-1 -mb-1 font-semibold text-sm">
                            <div class="hover:bg-gray-100 flex items-center p-1.5 rounded-md cursor-pointer">
                                <svg class="bg-blue-100 h-9 mr-2 p-1.5 rounded-full text-blue-600 w-9 -my-0.5 hidden uk-display-block" data-tippy-placement="top" title="Tooltip" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                照片/视频
                            </div>
                            <div class="hover:bg-gray-100 flex items-center p-1.5 rounded-md cursor-pointer">
                                <svg class="bg-green-100 h-9 mr-2 p-1.5 rounded-full text-green-600 w-9 -my-0.5 hidden uk-display-block" uk-tooltip="title: Messages ; pos: bottom ;offset:7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" title="" aria-expanded="false"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path></svg>
                                标记好友
                            </div>
                            <div class="hover:bg-gray-100 flex items-center p-1.5 rounded-md cursor-pointer">
                                <svg class="bg-red-100 h-9 mr-2 p-1.5 rounded-full text-red-600 w-9 -my-0.5 hidden uk-display-block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                感受 /活动
                            </div>
                        </div>
                    </div>
                    

                    <div id="postContent"></div>
                    <div id="articleContent"></div>

                    <div id="getMore" class="flex justify-center mt-6">
                        <a href="javascript:getPost();" class="bg-white dark:bg-gray-900 font-semibold my-3 px-6 py-2 rounded-full shadow-md dark:bg-gray-800 dark:text-white">
                            加载更多 ..</a>
                    </div>
                </div>

</div>
 
</div>
	



<!-- Create post modal -->
<div id="create-post-modal" class="create-post is-story" uk-modal>
    <div
            class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical rounded-lg p-0 lg:w-5/12 relative shadow-2xl uk-animation-slide-bottom-small">

        <div class="text-center py-3 border-b">
            <h3 class="text-lg font-semibold"> 创建帖子 </h3>
            <button class="uk-modal-close-default bg-gray-100 rounded-full p-2.5 right-2" type="button" uk-close uk-tooltip="title: 关闭 ; pos: bottom ;offset:7"></button>
        </div>
        <div class="overflow-y-auto h-96" >
            <div class="flex flex-1 items-start space-x-4 p-5">
                <img src=""
                     class="bg-gray-200 border border-white rounded-full w-11 h-11">
                <div class="flex-1 pt-2">
                    <textarea id="desc" class="uk-textare text-black shadow-none focus:shadow-none text-xl font-medium resize-none" rows="5"
                              placeholder="，分享你的新鲜事吧！"></textarea>

                </div>
            </div>
            <div class="bsolute bottom-0 pl-4 pr-4 space-x-4 w-full">
                <div class="flex bg-gray-50 border border-purple-100 rounded-2xl h-48 items-center js-upload hover:bg-gray-100 relative">

                    <button class="uk-modal-close-default2 bg-gray-100 rounded-full p-2.5 right-2 uk-icon uk-close" type="button" uk-close="" uk-tooltip="title: Close ; pos: bottom ;offset:7" title="" aria-expanded="false"><svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg" data-svg="close-icon"><line fill="none" stroke="#000" stroke-width="1.1" x1="1" y1="1" x2="13" y2="13"></line><line fill="none" stroke="#000" stroke-width="1.1" x1="13" y1="1" x2="1" y2="13"></line></svg></button>

                    <div id="placeholder"  class=" uk-placeholder uk-text-center justify-center uk-text-center mr-auto ml-auto">
                        <span uk-icon="icon: cloud-upload"></span>
                        <span class="uk-text-middle">拖放照片/视频 或</span>
                        <div uk-form-custom >
                            <input class="select-file cursor-pointer" type="file" multiple>
                            <span class="uk-link cursor-pointer text-blue-400">选择一个</span>
                        </div>
                    </div>
                    <div id="imgBox" hidden class="w-full absolute top-0 h-full ">
                    </div>
                </div>
            </div>
        </div>
        <div class="bsolute bottom-0 p-4 space-x-4 w-full">
            <div class="flex bg-gray-50 border border-purple-100 rounded-2xl p-2 shadow-sm items-center">
                <div class="lg:block hidden ml-1"> 添加更多内容 </div>
                <div class="flex flex-1 items-center lg:justify-end justify-center space-x-2">

                    <svg class="bg-blue-100 h-9 p-1.5 rounded-full text-blue-600 w-9 cursor-pointer show-upload" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                    <svg class="text-red-600 h-9 p-1.5 rounded-full bg-red-100 w-9 cursor-pointer show-upload" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"> </path></svg>


                </div>
            </div>
        </div>
        <div class="flex items-center w-full justify-between border-t p-3">

            <select class="selectpicker mt-2 story " id="visible">
                <option value="4">仅限自己</option>
                <option selected value="0">公开</option>
                <option value="1">好友可见</option>
                <option value="2">指定好友不可见</option>
                <option value="3">指定好友可见</option>
            </select>

            <div class="flex space-x-2">
                <a href="javascript:createPost();" class="bg-blue-600 flex h-9 items-center justify-center rounded-md text-white px-5 font-medium">
                    发&nbsp;帖 </a>
            </div>

        </div>
    </div>
</div>

<!-- Edit post modal -->
<div id="edit-post-modal" class="edit-post is-story" uk-modal>
    <div
            class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical rounded-lg p-0 lg:w-5/12 relative shadow-2xl uk-animation-slide-bottom-small">

        <div class="text-center py-3 border-b">
            <h3 class="text-lg font-semibold"> 编辑帖子 </h3>
            <button class="uk-modal-close-default bg-gray-100 rounded-full p-2.5 right-2" type="button" uk-close uk-tooltip="title: 关闭 ; pos: bottom ;offset:7"></button>
        </div>
        <div class="overflow-y-auto h-96" >
            <div class="flex flex-1 items-start space-x-4 p-5">
                <img src=""
                     class="bg-gray-200 border border-white rounded-full w-11 h-11">
                <div class="flex-1 pt-2">
                    <textarea id="desc2" class="uk-textare text-black shadow-none focus:shadow-none text-xl font-medium resize-none" rows="5"
                              placeholder="，分享你的新鲜事吧！"></textarea>

                </div>
            </div>
            <div class="bsolute bottom-0 pl-4 pr-4 space-x-4 w-full">
                <div class="flex bg-gray-50 border border-purple-100 rounded-2xl h-48 items-center js-upload2 hover:bg-gray-100 relative">

                    <button class="uk-modal-close-default2 bg-gray-100 rounded-full p-2.5 right-2 uk-icon uk-close" type="button" uk-close="" uk-tooltip="title: Close ; pos: bottom ;offset:7" title="" aria-expanded="false"><svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg" data-svg="close-icon"><line fill="none" stroke="#000" stroke-width="1.1" x1="1" y1="1" x2="13" y2="13"></line><line fill="none" stroke="#000" stroke-width="1.1" x1="13" y1="1" x2="1" y2="13"></line></svg></button>

                    <div id="placeholder2"  class=" uk-placeholder uk-text-center justify-center uk-text-center mr-auto ml-auto">
                        <span uk-icon="icon: cloud-upload"></span>
                        <span class="uk-text-middle">拖放照片/视频 或</span>
                        <div uk-form-custom >
                            <input class="select-file cursor-pointer" type="file" multiple>
                            <span class="uk-link cursor-pointer text-blue-400">选择一个</span>
                        </div>
                    </div>
                    <div id="imgBox2" hidden class="w-full absolute top-0 h-full ">
                    </div>
                </div>
            </div>
        </div>
        <div class="bsolute bottom-0 p-4 space-x-4 w-full">
            <div class="flex bg-gray-50 border border-purple-100 rounded-2xl p-2 shadow-sm items-center">
                <div class="lg:block hidden ml-1"> 添加更多内容 </div>
                <div class="flex flex-1 items-center lg:justify-end justify-center space-x-2">

                    <svg class="bg-blue-100 h-9 p-1.5 rounded-full text-blue-600 w-9 cursor-pointer show-upload" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                    <svg class="text-red-600 h-9 p-1.5 rounded-full bg-red-100 w-9 cursor-pointer show-upload" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"> </path></svg>

                </div>
            </div>
        </div>
        <div class="flex items-center w-full justify-between border-t p-3">

            <select class="selectpicker mt-2 story " id="visible2">
                <option value="4">仅限自己</option>
                <option value="0">公开</option>
                <option value="1">好友可见</option>
                <option value="2">指定好友不可见</option>
                <option value="3">指定好友可见</option>
            </select>

            <div class="flex space-x-2">
                <a href="javascript:updatePost();" class="bg-blue-600 flex h-9 items-center justify-center rounded-md text-white px-5 font-medium">
                    保&nbsp;存 </a>
            </div>

        </div>
    </div>
</div>

<!-- 收藏夹 modal -->
<div id="delete-post-modal" uk-modal>
    <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical rounded-lg p-0 lg:w-3/12 relative shadow-2xl uk-animation-slide-bottom-small">
        <div class="text-center py-3 border-b">
            <h3 class="text-lg font-semibold"> 删除帖子？ </h3>
            <button class="uk-modal-close-default bg-gray-100 rounded-full p-2.5 right-2" type="button" uk-close uk-tooltip="title: 关闭 ; pos: bottom ;offset:7"></button>
        </div>
        <div class="flex items-center w-full justify-between border-t p-3">

            删除帖子后不能恢复

        </div>
        <div class="flex items-center w-full justify-between border-t p-3 text-center">
            <div class="flex text-center ml-auto mr-auto">
                <a href="javascript:;" class="bg-gray-100 flex h-9 items-center justify-center rounded-md text-black px-5 font-medium mr-6 uk-modal-close-default relative top-0 right-0">
                    取&nbsp;消 </a>
                <a href="javascript:;" onclick="deletePost();" class="bg-blue-600 flex h-9 items-center justify-center rounded-md text-white px-5 font-medium">
                    确&nbsp;定 </a>
            </div>
        </div>

    </div>
</div>

<!-- 收藏夹 modal -->
<div id="saved-post-modal" uk-modal>
    <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical rounded-lg p-0 lg:w-3/12 relative shadow-2xl uk-animation-slide-bottom-small">
        <div class="text-center py-3 border-b">
            <h3 class="text-lg font-semibold"> 收藏到 </h3>
            <button class="uk-modal-close-default bg-gray-100 rounded-full p-2.5 right-2" type="button" uk-close uk-tooltip="title: 关闭 ; pos: bottom ;offset:7"></button>
        </div>
        <div class="flex items-center w-full justify-between border-t p-3">

            <select class="selectpicker mt-2 story " id="savedFolder">
                <option value="">请选择</option>
            </select>

        </div>
        <div class="flex items-center w-full justify-between border-t p-3 text-center">
            <div class="text-center ml-auto mr-auto">
                <a href="javascript:savedPost();" class="bg-blue-600 flex h-9 items-center justify-center rounded-md text-white px-5 font-medium">
                    收&nbsp;藏 </a>
            </div>
        </div>

    </div>
</div>
<input type="hidden" class="saved_pid" value="" >

<!-- 举报 modal -->
<div id="report-post-modal" uk-modal>
    <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical rounded-lg p-0 lg:w-3/12 relative shadow-2xl uk-animation-slide-bottom-small">
        <div class="text-center py-3 border-b">
            <h3 class="text-lg font-semibold"> 举报 </h3>
            <button class="uk-modal-close-default bg-gray-100 rounded-full p-2.5 right-2" type="button" uk-close uk-tooltip="title: 关闭 ; pos: bottom ;offset:7"></button>
        </div>
        <div class="flex items-center w-full justify-between border-t p-3">

            <select class="selectpicker mt-2 story " id="savedReport">
                <option value="">请选择</option>
                <option value="裸露内容">裸露内容</option>
                <option value="暴力">暴力</option>
                <option value="骚扰">骚扰</option>
                <option value="自杀或自残">自杀或自残</option>
                <option value="虚假信息">虚假信息</option>
                <option value="垃圾信息">垃圾信息</option>
                <option value="未授权交易">未授权交易</option>
                <option value="仇恨言论">仇恨言论</option>
                <option value="恐怖主义">恐怖主义</option>
                <option value="粗俗内容">粗俗内容</option>
                <option value="以上都不是">以上都不是</option>
            </select>

        </div>
        <div class="flex items-center w-full justify-between border-t p-3 text-center">
            <div class="text-center ml-auto mr-auto">
                <a href="javascript:reportPost();" class="bg-blue-600 flex h-9 items-center justify-center rounded-md text-white px-5 font-medium">
                    提&nbsp;交 </a>
                <input type="hidden" class="report_type" value="1">
            </div>
        </div>

    </div>
</div>





<!-- For Night mode -->
<script>
    (function (window, document, undefined) {
        'use strict';
        if (!('localStorage' in window)) return;
        var nightMode = localStorage.getItem('gmtNightMode');
        if (nightMode) {
            document.documentElement.className += ' night-mode';
        }
    })(window, document);

    (function (window, document, undefined) {

        'use strict';

        // Feature test
        if (!('localStorage' in window)) return;

        // Get our newly insert toggle
        var nightMode = document.querySelector('#night-mode');
        if (!nightMode) return;

        // When clicked, toggle night mode on or off
        nightMode.addEventListener('click', function (event) {
            event.preventDefault();
            document.documentElement.classList.toggle('dark');
            if (document.documentElement.classList.contains('dark')) {
                localStorage.setItem('gmtNightMode', true);
                return;
            }
            localStorage.removeItem('gmtNightMode');
        }, false);

    })(window, document);
</script>

<!-- Javascript
================================================== -->
<script src="/static/js/jquery-3.6.0.min.js" ></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script src="/static/js/tippy.all.min.js"></script>
<script src="/static/js/uikit.js"></script>
<script src="/static/js/layer/layer.js"></script>
<script src="/static/js/simplebar.js"></script>
<script src="/static/js/custom.js"></script>
<script src="/static/js/bootstrap-select.min.js"></script>
<script src="/static/js/ionicons.js"></script>
<script>
    $(function(){
        autoSearch();
        getArticles();
    })

    function gotoLogin(){
        layer.open({
            type: 2,
            title: ' ',
            shade: 0,
            area: ['480px', '480px'],
            content: ['/login/tan', 'no']
        });
    }

    function autoSearch() {

        $('#keyword-input').autocomplete({

            serviceUrl: '/searchAjax',
            type:'POST',
            dataType: 'json',
            appendTo: $('.header_search_dropdown'),
            beforeRender: function (element,res) {
                console.log(element);
                // let data = res.suggestions;
                let html = '';
                // $.each(that.suggestions, function (i, suggestion) {
                // });
                for(let i in res){
                    html += '<ul>\n' +
                        '                            <li>\n' +
                        '                                <a href="/search?k='+ res[i].username +'" target="main">\n' +
                        '                                    <span class="glyph fs1">\n' +
                        '                                        <span class="icon-feather-clock"></span>\n' +
                        '                                    </span>\n' +
                        '                                    <div class="list-name">  '+res[i].username+' </div>\n' +
                        '                                </a>\n' +
                        '                            </li>\n' +
                        '                        </ul>'
                }
                html += '<ul class="search-last-item">\n' +
                    '                            <li>\n' +
                    '                                <a href="/search?k='+ $('#keyword-input').val() +'"  target="main">\n' +
                    '                                    <span class="glyph fs1">\n' +
                    '                                        <span class="uil-search-alt"></span>\n' +
                    '                                    </span>\n' +
                    '                                    <div class="list-name">  搜索<strong>'+$('#keyword-input').val()+'</strong> </div>\n' +
                    '                                </a>\n' +
                    '                            </li>\n' +
                    '                        </ul>';
                // console.log(html);
                $('.header_search_dropdown').html(html);
            }
        });
    }


    function getArticles() {

        $.post('/index/articles', {}, function (res) {
            let lists = res.data;
            let html = '';
            for (let i in lists) {
                html += '<li '+ (i == 'hdjd' ? '' : 'style="margin-top:20px;"')+'><a href="javascript:;" style="color:' + lists[i].color + '">' + lists[i].typename + '</a></li>';
                let sub_list = lists[i].list;
                for (let j in sub_list) {
                    html += '<li style="overflow: hidden;white-space: nowrap;width: 265px;text-overflow: ellipsis;"> • <a href="/news/' + sub_list[j].id+ '.html" target="main" title="' + sub_list[j].title + '" >' + sub_list[j].title + '</a></li>';
                }

            }
            $('.wo').html(html);
        }, 'json')
    }

    function openArticle(id) {
        if ($('#articleContent').length > 0) {
            $('#getMore').hide();
            $.post('/getArticle/'+id, {}, function (res) {
                let data = res.data;
                let img_cont = '';
                if (data.imgs.length > 0) {
                    let img_arr = data.imgs;
                    for (let i in img_arr) {
                        img_cont += '<p><img src="'+img_arr[i].img+'"></p>';
                    }
                }
                let html = '<div class="card lg:mx-0 uk-animation-slide-bottom-small mb-5 overflow-visible">\n' +
                    '\n' +
                    '                            <!-- post header-->\n' +
                    '                            <div class="flex justify-between items-center lg:p-4 p-2.5" style="\n' +
                    '    text-align: center;\n' +
                    '    width: 100%;\n' +
                    '">\n' +
                    '   <h3 class="text-lg font-semibold" style="\n' +
                    '    width: 100%;margin-top:23px;' +
                    '">'+data.subject+'</h3><button onclick="returnPost()" class="uk-modal-close-default-article bg-gray-100 rounded-full p-2.5 right-2 uk-icon uk-close top-2" type="button" uk-close="" uk-tooltip="title: 返回 ; pos: bottom ;offset:7" title="" aria-expanded="false"><svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg" data-svg="close-icon"><line fill="none" stroke="#000" stroke-width="1.1" x1="1" y1="1" x2="13" y2="13"></line><line fill="none" stroke="#000" stroke-width="1.1" x1="13" y1="1" x2="1" y2="13"></line></svg></button> </div>\n' +
                    '\n' + '<div class=" text-center  m-5 mt-0"> '+data.addtime+' </div>' +
                    '<div class="p-5 pt-0 border-b dark:border-gray-700">\n' +
                    '<div class=" ">'+data.message+img_cont+'</div>';
                $('#articleContent').html(html);
                $('#postContent').hide();

            }, 'json')
        } else {
            location.href = '/index/thread/' + id+ '.html';
        }
    }

    function returnPost() {
        $('#articleContent').html('');
        $('#postContent').show();
        $('#getMore').show();
    }

    //同意好友请求
    function agreeFriend(uid,t) {
        layer.load();
        $.post('/agreeFriend', {uid:uid}, function(res) {
            let num = parseInt($('.notice-msg-count').text());
            if (num > 0) {
                $('.notice-msg-count').text(num-1);
            }
            if (res.code == 1) {
                if ($(t).hasClass('is_link')) {

                    $(t).parent().parent().parent().parent().remove();
                    let notice_msg_count = parseInt($('.notice-msg-count').text())-1;
                    $('.notice-msg-count').text(notice_msg_count);
                    if (notice_msg_count < 1) {
                        $('.notice-msg-count').hide();
                        $('.notice-center-btn').show();
                        $('.notice-center').hide();
                        $('.main_content').click();
                        getFriends()
                    }
                    layer.closeAll();
                } else {
                    location.reload()
                }
            } else {
                layer.msg(res.msg)
            }
        }, 'json');
    }

    //移除好友请求
    function delFriendReq(uid,t) {
        layer.load();
        $.post('/delFriendReq', {uid:uid, ruid:0}, function(res) {
            if (res.code == 1) {
                if ($(t).hasClass('is_link')) {
                    $(t).parent().parent().parent().parent().remove();
                    let notice_msg_count = parseInt($('.notice-msg-count').text())-1;
                    $('.notice-msg-count').text(notice_msg_count);
                    if (notice_msg_count < 1) {
                        $('.notice-msg-count').hide();
                        $('.notice-center-btn').show();
                        $('.notice-center').hide();
                        $('.main_content').click();
                    }
                    layer.closeAll();
                } else {
                    location.reload()
                }
            } else {
                layer.msg(res.msg)
            }
            layer.closeAll();
        }, 'json');
    }
</script>

<script src="/static/js/jquery.share.min.js"></script>



<script>

    var from_client_id = 0;
    var from_uid = '0';
    var to_uid = '';
    var post_file = [],post_file2 = [],session_uid='0',post_video_file='';
    $(function(){
        getPost();



        $('.uk-modal-close-default2').click(function () {
            post_file = [];
            post_video_file = '';
            $('#placeholder').removeAttr('hidden');
            $('#imgBox').attr('hidden','hidden');
        })

        document.querySelector('body').onscroll = handleScroll;


        var handleScroll = function(e) {
            var hh = e.target.scrollingElement.scrollTop;
            console.log(hh);
        }
        // $('#postContent').on('click','.comment-target',function(){
        //     let post_id = $(this).data('id');
        //     $('.comment-box-'+post_id).show().find('.comment-content').focus();
            // $(this).parent().parent().find('.comment-content').focus();
            // alert(123)
        // })

        $('.show-upload').click(function () {
            $('.js-upload').removeAttr('hidden');
            $('.select-file').click();
        })
        // $('.show-upload').click(function () {
        //     $('.js-upload').removeAttr('hidden');
        //     $('.select-file').click();
        // })

        UIkit.upload('.js-upload', {

            url: '/upload',
            multiple: false,
            name: 'file',
            type: 'json',
            beforeAll: function (files) {
                // console.log(files);
                layer.msg('上传中...',{time:30000});
            },
            load: function () {
                // layer.msg('上传中...',{time:10000});
            },
            error: function () {
                layer.msg('上传文件错误！');
            },
            complete: function (res) {
                layer.closeAll();
                if (res.response.status != 1) {
                    layer.msg(res.response.msg);
                    return false;
                }
                $('#placeholder').attr('hidden','');
                $('#imgBox').removeAttr('hidden');
                let html = '';
                if (checkFile(res.response.path, 'video')) {
                    post_video_file = res.response.path;
                    html += '<div class="flex" ><video class="video-ele w-full" src="'+post_video_file+'" controls playsinline  uk-video="autoplay: inview"></video></div>';
                } else {
                    post_file.push(res.response.path);
                    let img_count = post_file.length;
                    console.log(img_count);
                    switch (img_count) {
                        case 1:
                            for (let i in post_file) {
                                html += '<div class="flex" ><img class="rounded-2xl w-full object-cover" src="'+post_file[i]+'"></div>';
                            }
                            break;
                        case 2:
                            html += '<div class="flex h-full" >';
                            for (let i in post_file) {
                                let className;
                                if (i == 0) {
                                    className = 'rounded-r-none';
                                } else {
                                    className = 'rounded-l-none ';
                                }
                                html += '<img class="rounded-2xl w-2/4 object-cover '+ className +'" src="'+post_file[i]+'">';
                            }
                            html += '</div>';
                            break;
                        case 3:
                            let html2 = '<div class="flex" >';
                            for (let i in post_file) {
                                let className;
                                if (i == 0) {
                                    html += '<div class="flex" style="height: 232px;" ><img class="rounded-2xl w-full rounded-b-none object-cover" src="'+post_file[i]+'"></div>';
                                } else {
                                    if (i == 1) {
                                        className = 'rounded-r-none';
                                    } else {
                                        className = 'rounded-l-none';
                                    }
                                    html2 += '<img class="rounded-2xl w-2/4 rounded-t-none object-cover '+ className +'" src="'+post_file[i]+'">';
                                }
                            }
                            html2 += '</div>';
                            html += html2;
                            break;
                        case 4:
                            html += '<div class="flex" >';
                            let html3 = '</div><div class="flex" >';
                            for (let i in post_file) {
                                let className;
                                if (i < 2) {
                                    let className;
                                    if (i == 0) {
                                        className = 'rounded-r-none';
                                    } else {
                                        className = 'rounded-l-none';
                                    }
                                    html += '<img class="rounded-2xl w-2/4 rounded-b-none object-cover '+ className +'" src="'+post_file[i]+'">';
                                } else {
                                    if (i == 2) {
                                        className = 'rounded-r-none';
                                    } else {
                                        className = 'rounded-l-none';
                                    }
                                    html3 += '<img class="rounded-2xl w-2/4 rounded-t-none object-cover '+ className +'" src="'+post_file[i]+'">';
                                }
                            }
                            html3 += '</div>';
                            html += html3;

                            break;
                        case 5:

                            html += '<div class="flex" >';
                            let html4 = '</div><div class="flex" >';
                            for (let i in post_file) {
                                let className;
                                if (i < 2) {
                                    let className;
                                    if (i == 0) {
                                        className = 'rounded-r-none';
                                    } else {
                                        className = 'rounded-l-none';
                                    }
                                    html += '<img class="rounded-2xl w-2/4 rounded-b-none object-cover '+ className +'" src="'+post_file[i]+'">';
                                } else {
                                    if (i == 2) {
                                        className = 'rounded-r-none';
                                    } else if (i == 3) {
                                        className = 'rounded-r-none rounded-l-none';
                                    } else {
                                        className = 'rounded-l-none';
                                    }
                                    html4 += '<img class="rounded-2xl w-1/3 rounded-t-none object-cover '+ className +'" src="'+post_file[i]+'">';
                                }
                            }
                            html4 += '</div>';
                            html += html4;
                            break;
                        default:

                            html += '<div class="flex" >';
                            let html5 = '</div><div class="flex" >';
                            for (let i in post_file) {
                                let className;
                                if (i < 2) {
                                    let className;
                                    if (i == 0) {
                                        className = 'rounded-r-none';
                                    } else {
                                        className = 'rounded-l-none';
                                    }
                                    html += '<img class="rounded-2xl w-2/4 rounded-b-none object-cover '+ className +'" src="'+post_file[i]+'">';
                                } else if (i > 1 && i < 5) {
                                    if (i == 2) {
                                        className = 'rounded-r-none';
                                    } else if (i == 3) {
                                        className = 'rounded-r-none rounded-l-none';
                                    } else {
                                        className = 'rounded-l-none';
                                    }
                                    if (i == 4) {
                                        html5 += '<div class=" w-1/3 relative"><img class="rounded-2xl rounded-t-none object-cover w-full h-full '+ className +'" src="'+post_file[i]+'"><div class="absolute w-full h-full top-0 items-center justify-center flex rounded-2xl rounded-l-none rounded-t-none" style="background-color: rgba(0,0,0,0.4)"><span class="text-white text-2xl">+'+ (img_count-5) +'</span></div></div>';
                                    } else {
                                        html5 += '<div class=" w-1/3"><img class="rounded-2xl rounded-t-none object-cover w-full h-full '+ className +'" src="'+post_file[i]+'"></div>';
                                    }
                                }
                            }
                            html5 += '</div>';
                            html += html5;
                            break;
                    }
                    html += '<div uk-form-custom class="absolute top-1 bg-white border border-gray-50 left-2 p-1 rounded-lg" >\n' +
                        '                            <input class=" cursor-pointer" type="file" multiple>\n' +
                        '                            <span class="uk-link cursor-pointer text-black">添加照片/视频</span>\n' +
                        '                        </div>';
                }
                $('#imgBox').html(html);

            }

        });

        UIkit.upload('.js-upload2', {

            url: '/upload',
            multiple: false,
            name: 'file',
            type: 'json',
            beforeAll: function (files) {
                console.log(files);
                // layer.msg('上传中...',{time:10000});
            },
            load: function () {
                // layer.msg('上传中...',{time:10000});
            },
            error: function () {
                layer.msg('上传文件错误！');
            },
            complete: function (res) {
                if (res.response.status != 1) {
                    layer.msg(res.response.msg);
                    return false;
                }
                $('#placeholder2').attr('hidden','');
                $('#imgBox2').removeAttr('hidden');
                let html = '';
                post_file2.push(res.response.path);
                // console.log(post_file2);
                let img_count = post_file2.length;
                console.log(img_count);
                switch (img_count) {
                    case 1:
                        for (let i in post_file2) {
                            html += '<div class="flex" ><img class="rounded-2xl w-full object-cover" src="'+post_file2[i]+'"></div>';
                        }
                        break;
                    case 2:
                        html += '<div class="flex h-full" >';
                        for (let i in post_file2) {
                            let className;
                            if (i == 0) {
                                className = 'rounded-r-none';
                            } else {
                                className = 'rounded-l-none';
                            }
                            html += '<img class="rounded-2xl w-2/4 object-cover '+ className +'" src="'+post_file2[i]+'">';
                        }
                        html += '</div>';
                        break;
                    case 3:
                        let html2 = '<div class="flex" >';
                        for (let i in post_file2) {
                            let className;
                            if (i == 0) {
                                html += '<div class="flex" style="height: 232px;" ><img class="rounded-2xl w-full rounded-b-none object-cover" src="'+post_file2[i]+'"></div>';
                            } else {
                                if (i == 1) {
                                    className = 'rounded-r-none';
                                } else {
                                    className = 'rounded-l-none';
                                }
                                html2 += '<img class="rounded-2xl w-2/4 rounded-t-none object-cover '+ className +'" src="'+post_file2[i]+'">';
                            }
                        }
                        html2 += '</div>';
                        html += html2;
                        break;
                    case 4:
                        html += '<div class="flex" >';
                        let html3 = '</div><div class="flex" >';
                        for (let i in post_file2) {
                            let className;
                            if (i < 2) {
                                let className;
                                if (i == 0) {
                                    className = 'rounded-r-none';
                                } else {
                                    className = 'rounded-l-none';
                                }
                                html += '<img class="rounded-2xl w-2/4 rounded-b-none object-cover '+ className +'" src="'+post_file2[i]+'">';
                            } else {
                                if (i == 2) {
                                    className = 'rounded-r-none';
                                } else {
                                    className = 'rounded-l-none';
                                }
                                html3 += '<img class="rounded-2xl w-2/4 rounded-t-none object-cover '+ className +'" src="'+post_file2[i]+'">';
                            }
                        }
                        html3 += '</div>';
                        html += html3;

                        break;
                    case 5:

                        html += '<div class="flex" >';
                        let html4 = '</div><div class="flex" >';
                        for (let i in post_file2) {
                            let className;
                            if (i < 2) {
                                let className;
                                if (i == 0) {
                                    className = 'rounded-r-none';
                                } else {
                                    className = 'rounded-l-none';
                                }
                                html += '<img class="rounded-2xl w-2/4 rounded-b-none object-cover '+ className +'" src="'+post_file2[i]+'">';
                            } else {
                                if (i == 2) {
                                    className = 'rounded-r-none';
                                } else if (i == 3) {
                                    className = 'rounded-r-none rounded-l-none';
                                } else {
                                    className = 'rounded-l-none';
                                }
                                html4 += '<img class="rounded-2xl w-1/3 rounded-t-none object-cover '+ className +'" src="'+post_file2[i]+'">';
                            }
                        }
                        html4 += '</div>';
                        html += html4;
                        break;
                    default:

                        html += '<div class="flex" >';
                        let html5 = '</div><div class="flex" >';
                        for (let i in post_file2) {
                            let className;
                            if (i < 2) {
                                let className;
                                if (i == 0) {
                                    className = 'rounded-r-none';
                                } else {
                                    className = 'rounded-l-none';
                                }
                                html += '<img class="rounded-2xl w-2/4 rounded-b-none object-cover '+ className +'" src="'+post_file2[i]+'">';
                            } else if (i > 1 && i < 5) {
                                if (i == 2) {
                                    className = 'rounded-r-none';
                                } else if (i == 3) {
                                    className = 'rounded-r-none rounded-l-none';
                                } else {
                                    className = 'rounded-l-none';
                                }
                                if (i == 4) {
                                    html5 += '<div class=" w-1/3 relative"><img class="rounded-2xl rounded-t-none object-cover w-full h-full '+ className +'" src="'+post_file2[i]+'"><div class="absolute w-full h-full top-0 items-center justify-center flex rounded-2xl rounded-l-none rounded-t-none" style="background-color: rgba(0,0,0,0.4)"><span class="text-white text-2xl">+'+ (img_count-5) +'</span></div></div>';
                                } else {
                                    html5 += '<div class=" w-1/3"><img class="rounded-2xl rounded-t-none object-cover w-full h-full '+ className +'" src="'+post_file2[i]+'"></div>';
                                }
                            }
                        }
                        html5 += '</div>';
                        html += html5;
                        break;
                }
                html += '<div uk-form-custom class="absolute top-1 bg-white border border-gray-50 left-2 p-1 rounded-lg" >\n' +
                    '                            <input class=" cursor-pointer" type="file" multiple>\n' +
                    '                            <span class="uk-link cursor-pointer text-black">添加照片/视频</span>\n' +
                    '                        </div>';
                $('#imgBox2').html(html);

            }

        });


    })

    function checkFile(fileValue,type) {
        console.log("fileValue==" + fileValue);
        var index = fileValue.indexOf("."); //（考虑严谨用lastIndexOf(".")得到）得到"."在第几位
        fileValueSuffix = fileValue.substring(index); //截断"."之前的，得到后缀
        if(type == 'video') {
            if (!/(.*)\.(mp4|MP4|rmvb|avi|ts)$/.test(fileValueSuffix)) { //根据后缀，判断是否符合视频格式
                return false;
            }
        }
        if(type == 'image') {
            if (!/(.*)\.(gif|jpg|jpeg|png|GIF|JPG|PNG)$/.test(fileValueSuffix)) { //根据后缀，判断是否符合图片格式
                return false;
            }
        }

        return true;
    }



    var post_doing = false;
    function submitComment(t,id,ruid) {
        var data = {};
        data.content = $(t).find('.comment-content').val();
        if (!data.content) {
            return false;
        }
        if (post_doing) {
            return false;
        }
        post_doing = true;
        data.pid = id;
        data.pid_sub = $(t).find('.comment-content').data('pid_sub');
        data.rid = $(t).find('.comment-content').data('rid');
        data.touid = $(t).find('.comment-content').data('touid');
        $.post('/post/comment', data, function(res) {
            post_doing = false;
            if (res.code == 1) {
                $(t).find('.comment-content').val('');
                layer.msg('评论成功！');
                let comment_html = '';
                let author_html = '';
                if (from_client_id == ruid) {
                    author_html = '<span class="text-red-500 ml-2">作者</span>';
                }
                if (res.huifu > 0) {
                    data.content = '回复 '+res.huifu+'：'+data.content;
                }
                comment_html += '<div class="flex">\n' +
                    '                                        <div class="w-10 h-10 rounded-full relative flex-shrink-0 py-2">\n' +
                    '                                            <img src="'+ res.data.headimg +'" alt="" class="absolute h-full rounded-full w-full">\n' +
                    '                                        </div>\n' +
                    '                                        <div>\n' +
                    '                                            <div class="text-gray-700 px-3 rounded-md relative lg:ml-3 ml-2 lg:mr-12 dark:text-gray-100">\n' +
                    '                                                <div class="leading-6"><p class="text-gray-500">'+ res.data.username + author_html +'</p><p>'+ data.content +'</p></div>\n' +
                    '                                                <div class="absolute w-3 h-3 top-3 -left-1 bg-gray-100 transform rotate-45 dark:bg-gray-800"></div>\n' +
                    '                                            </div>\n' +
                    '                                            <div class="text-sm flex items-center space-x-3 mt-2 ml-5">\n' +
                    '                                                <a href="#" class=""> <i class="uil-heart"></i> 赞 </a>\n' +
                    '                                                <a href="#"> 回复 </a>\n' +
                    '                                                <span> 刚刚 </span>\n' +
                    '                                            </div>\n' +
                    '                                        </div>\n' +
                    '                                    </div>';
                if (data.rid > 0) {
                    $('.comment-id-'+data.rid+' .sub-comment-cont').append(comment_html);
                } else {
                    $(t).parent().prev('.border-t').show().prepend(comment_html);
                }
            } else {
                layer.msg(res.msg);
            }
        }, 'json')

        return false;
    }

    function addZan(t,id,is) {
        var data = {};
        $.post('/addZanPost/'+id, data, function(res) {
            if (res.code == 1) {
                if (is == 0) {
                    $(t).attr('onclick','addZan(this,'+id+',1)');
                    $(t).find('div').addClass('text-red-600');
                    $(t).find('.rounded-full').addClass('bg-red-100');
                } else {
                    $(t).attr('onclick','addZan(this,'+id+',0)');
                    $(t).find('div').removeClass('text-red-600');
                    $(t).find('.rounded-full').removeClass('bg-red-100');
                }
            } else {
                layer.msg(res.msg);
            }
        }, 'json')

        return false;
    }


    function createPost() {
        var data = {};
        data.desc = $('#desc').val();
        data.visible = $('#visible').val();
        data.photos = post_file;
        data.video = post_video_file;
        layer.load();
        $.post('/post/create', data, function(res) {
            layer.closeAll();
            if (res.code == 1) {
                layer.msg('发帖成功！',{time:1500},function(){
                    // location.reload();
                    $('#create-post-modal .uk-modal-close-default').click();

                    let post_content = '<div class="p-5 pt-0 border-b dark:border-gray-700">\n' + data.desc +' </div>';
                    if (data.photos.length > 0) {
                        let post_file = data.photos;
                        post_content += '<div uk-lightbox="">';

                        let img_count = post_file.length;
                        // console.log(img_count);
                        switch (img_count) {
                            case 1:
                                for (let i in post_file) {
                                    post_content += '<div class="flex" ><a class="w-full" href="'+post_file[i]+'"><img class=" w-full h-full object-cover" src="'+post_file[i]+'"></a></div>';
                                }
                                break;
                            case 2:
                                post_content += '<div class="flex h-full" >';
                                for (let i in post_file) {
                                    let className;
                                    if (i == 0) {
                                        className = 'pr-px';
                                    } else {
                                        className = 'pl-px';
                                    }
                                    post_content += '<a class="w-2/4" href="'+post_file[i]+'"><img class=" w-full h-full object-cover '+ className +'" src="'+post_file[i]+'"></a>';
                                }
                                post_content += '</div>';
                                break;
                            case 3:
                                let html2 = '<div class="flex" >';
                                for (let i in post_file) {
                                    let className;
                                    if (i == 0) {
                                        post_content += '<div class="flex" style="height: 232px;" ><a class=" w-full" href="'+post_file[i]+'"><img class="pb-px w-full h-full rounded-b-none object-cover" src="'+post_file[i]+'"></a></div>';
                                    } else {
                                        if (i == 1) {
                                            className = 'pr-px';
                                        } else {
                                            className = 'pl-px';
                                        }
                                        html2 += '<a class=" w-2/4" href="'+post_file[i]+'"><img class="pt-px w-full h-full rounded-t-none object-cover '+ className +'" src="'+post_file[i]+'"></a>';
                                    }
                                }
                                html2 += '</div>';
                                post_content += html2;
                                break;
                            case 4:
                                post_content += '<div class="flex" >';
                                let html3 = '</div><div class="flex" >';
                                for (let i in post_file) {
                                    let className;
                                    if (i < 2) {
                                        let className;
                                        if (i == 0) {
                                            className = 'pr-px';
                                        } else {
                                            className = 'pl-px';
                                        }
                                        post_content += '<a class=" w-2/4" href="'+post_file[i]+'"><img class="pb-px w-full h-full rounded-b-none object-cover '+ className +'" src="'+post_file[i]+'"></a>';
                                    } else {
                                        if (i == 2) {
                                            className = 'pr-px';
                                        } else {
                                            className = 'pl-px';
                                        }
                                        html3 += '<a class=" w-2/4" href="'+post_file[i]+'"><img class="pt-px w-full h-full rounded-t-none object-cover '+ className +'" src="'+post_file[i]+'"></a>';
                                    }
                                }
                                html3 += '</div>';
                                post_content += html3;

                                break;
                            case 5:

                                post_content += '<div class="flex" >';
                                let html4 = '</div><div class="flex" >';
                                for (let i in post_file) {
                                    let className;
                                    if (i < 2) {
                                        let className;
                                        if (i == 0) {
                                            // className = 'rounded-r-none';
                                        } else {
                                            // className = 'rounded-l-none';
                                        }
                                        post_content += '<a class=" w-2/4" href="'+post_file[i]+'"><img class=" w-full h-full rounded-b-none object-cover '+ className +'" src="'+post_file[i]+'"></a>';
                                    } else {
                                        if (i == 2) {
                                            className = 'rounded-r-none';
                                        } else if (i == 3) {
                                            className = 'rounded-r-none rounded-l-none';
                                        } else {
                                            className = 'rounded-l-none';
                                        }
                                        html4 += '<a class=" w-1/3" href="'+post_file[i]+'"><img class=" w-full h-full rounded-t-none object-cover '+ className +'" src="'+post_file[i]+'"></a>';
                                    }
                                }
                                html4 += '</div>';
                                post_content += html4;
                                break;
                            default:

                                post_content += '<div class="flex" >';
                                let html5 = '</div><div class="flex" >';
                                for (let i in post_file) {
                                    let className;
                                    if (i < 2) {
                                        let className;
                                        if (i == 0) {
                                            className = 'rounded-r-none';
                                        } else {
                                            className = 'rounded-l-none';
                                        }
                                        post_content += '<a class="w-2/4" href="'+post_file[i]+'"><img class=" w-full h-full rounded-b-none object-cover '+ className +'" src="'+post_file[i]+'"></a>';
                                    } else if (i > 1 && i < 5) {
                                        if (i == 2) {
                                            className = 'rounded-r-none';
                                        } else if (i == 3) {
                                            className = 'rounded-r-none rounded-l-none';
                                        } else {
                                            className = 'rounded-l-none';
                                        }
                                        if (i == 4) {
                                            html5 += '<div class=" w-1/3 relative"><a class=" w-full" href="'+post_file[i]+'"><img class=" rounded-t-none object-cover w-full h-full '+ className +'" src="'+post_file[i]+'"></a><div class="absolute w-full h-full top-0 items-center justify-center flex  rounded-l-none rounded-t-none" style="background-color: rgba(0,0,0,0.4)"><span class="text-white text-2xl">+'+ (img_count-5) +'</span></div></div>';
                                        } else {
                                            html5 += '<div class=" w-1/3"><a class=" w-full" href="'+post_file[i]+'"><img class=" rounded-t-none object-cover w-full h-full '+ className +'" src="'+post_file[i]+'"></a></div>';
                                        }
                                    }
                                }
                                html5 += '</div>';
                                post_content += html5;
                                break;
                        }
                        // for(let j in sub_list){
                        //     post_content += '<a href="'+ sub_list[j].url +'"><img src="'+ sub_list[j].url +'" alt="" class="max-h-96 w-full object-cover"></a>';
                        // }
                        post_content += '</div>';
                    }
                    if  (data.video) {
                        post_content += '<div class="flex" ><video class="video-ele w-full" src="'+data.video+'" controls playsinline ></video></div>';
                    }
                    let html = '<div class="card lg:mx-0 uk-animation-slide-bottom-small mb-5 overflow-visible">\n' +
                        '\n' +
                        '                            <!-- post header-->\n' +
                        '                            <div class="flex justify-between items-center lg:p-4 p-2.5">\n' +
                        '                                <div class="flex flex-1 items-center space-x-4">\n' +
                        '                                    <a href="/space/'+ res.data.uid +'">\n' +
                        '                                        <img src="'+ res.data.head_portrait +'" class="bg-gray-200 border border-white rounded-full w-10 h-10">\n' +
                        '                                    </a>\n' +
                        '                                    <div class="flex-1 font-semibold capitalize">\n' +
                        '                                        <a href="/space/'+ res.data.uid +'" class="text-black dark:text-gray-100"> '+ res.data.username +' </a>\n' +
                        '                                        <div class="text-gray-700 flex items-center space-x-2"> '+ res.data.addtime +' <ion-icon name="people"></ion-icon></div>\n' +
                        '                                    </div>\n' +
                        '                                </div>\n' +
                        '                                <div>\n' +
                        '                                    <a href="#"> <i class="icon-feather-more-horizontal text-2xl hover:bg-gray-200 rounded-full p-2 transition -mr-1 dark:hover:bg-gray-700"></i> </a>\n' +
                        '                                    <div class="bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-gray-500 hidden text-base border border-gray-100 dark:bg-gray-900 dark:text-gray-100 dark:border-gray-700"\n' +
                        '                                         uk-drop="mode: click;pos: bottom-right;animation: uk-animation-slide-bottom-small">\n' +
                        '\n' +
                            '                                        <ul class="space-y-1">\n' +
                            '                                            <li>\n' +
                            '                                                <a href="javascript:;" onclick="saved('+res.data.id+')" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800">\n' +
                            '                                                    <i class="icon-feather-bookmark mr-1"></i> 收藏帖子\n' +
                            '                                                </a>\n' +
                            '                                            </li>\n' +
                            '                                            <li>\n' +
                            '                                                <a href="javascript:;" onclick="editPost('+res.data.id+')" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800">\n' +
                            '                                                    <i class="uil-edit-alt mr-1"></i>  编辑帖子\n' +
                            '                                                </a>\n' +
                            '                                            </li>\n' +
                            '                                            <li>\n' +
                            '                                                <a href="javascript:;" onclick="editPost('+res.data.id+')" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800">\n' +
                            '                                                    <i class="uil-eye mr-1"></i>   指定可见\n' +
                            '                                                </a>\n' +
                            '                                            </li>\n' +
                            '                                            <li>\n' +
                            '                                                <hr class="-mx-2 my-2 dark:border-gray-800">\n' +
                            '                                            </li>\n' +
                            '                                            <li>\n' +
                            '                                                <a href="javascript:;" onclick="delPost('+res.data.id+')" class="flex items-center px-3 py-2 text-red-500 hover:bg-red-100 hover:text-red-500 rounded-md dark:hover:bg-red-600">\n' +
                            '                                                    <i class="uil-trash-alt mr-1"></i>  删除\n' +
                            '                                                </a>\n' +
                            '                                            </li>\n' +
                            '                                        </ul>\n' +
                            '\n' +
                        '                                    </div>\n' +
                        '                                </div>\n' +
                        '                            </div>\n' +
                        '\n' + post_content +
                        '\n' +
                        '\n' +
                        '                            <div class="p-4 space-y-3">\n' +
                        '\n' +
                        '                                <div class="flex space-x-4 lg:font-bold">\n' +
                        '                                    <a href="javascript:;" onclick="addZan(this,'+res.data.id+')" class="flex items-center space-x-2">\n' +
                        '                                        <div class="p-2 rounded-full  text-black  dark:bg-gray-600 ">\n' +
                        '                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="22" height="22" class="dark:text-gray-100">\n' +
                        '                                                <path d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z" />\n' +
                        '                                            </svg>\n' +
                        '                                        </div>\n' +
                        '                                        <div class=""> 赞</div>\n' +
                        '                                    </a>\n' +
                        '                                    <a href="javascript:;" onclick="replyComment('+res.data.id+','+res.data.id+',0,0,\'\')" class="flex items-center space-x-2 comment-target" data-id="'+res.data.id+'">\n' +
                        '                                        <div class="p-2 rounded-full  text-black lg:bg-gray-100 dark:bg-gray-600">\n' +
                        '                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="22" height="22" class="dark:text-gray-100">\n' +
                        '                                                <path fill-rule="evenodd" d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z" clip-rule="evenodd" />\n' +
                        '                                            </svg>\n' +
                        '                                        </div>\n' +
                        '                                        <div> 评论</div>\n' +
                        '                                    </a>\n' +
                        '                                    <a href="#" class="flex items-center space-x-2 flex-1 justify-end " >\n' +
                        '                                        <div class="p-2 rounded-full  text-black lg:bg-gray-100 dark:bg-gray-600">\n' +
                        '                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="22" height="22" class="dark:text-gray-100">\n' +
                        '                                                <path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z" />\n' +
                        '                                            </svg>\n' +
                        '                                        </div>\n' +
                        '                                        <div> 分享</div>\n' +
                        '                                    </a><div uk-drop="mode: click;pos: top-center" class="card p-4 overflow-visible"><div class="share-2"></div></div>\n' +
                        '                                </div>\n' +
                        '                                <div class="bg-gray-100 rounded-full relative dark:bg-gray-800 border-t comment-box-'+res.data.id+'">\n' +
                        '                                    <form class="comment-form" onsubmit="return submitComment(this,'+res.data.id+','+res.data.uid+');" ><input placeholder="输入你的评论.." class="bg-transparent max-h-10 shadow-none px-5 comment-content"></form>\n' +
                        '                                    <div class="-m-0.5 absolute bottom-0 flex items-center right-3 text-xl">\n' +
                        '                                        <a href="#">\n' +
                        '                                            <ion-icon name="happy-outline" class="hover:bg-gray-200 p-1.5 rounded-full"></ion-icon>\n' +
                        '                                        </a>\n' +
                        '                                        <a href="#">\n' +
                        '                                            <ion-icon name="image-outline" class="hover:bg-gray-200 p-1.5 rounded-full"></ion-icon>\n' +
                        '                                        </a>\n' +
                        '                                        <a href="#">\n' +
                        '                                            <ion-icon name="link-outline" class="hover:bg-gray-200 p-1.5 rounded-full"></ion-icon>\n' +
                        '                                        </a>\n' +
                        '                                    </div>\n' +
                        '                                </div>\n' +
                        '\n' +
                        '                            </div>\n' +
                        '\n' +
                        '                        </div>';
                    $('#postContent').html(html+$('#postContent').html());
                });

            } else {
                layer.msg(res.msg);
            }
        }, 'json')
    }

    function HTMLDecode(text) {
        let str = text.replace(/\r\n|\r|\n/g,"<br />");
        str = str.replace(/\n\s|\r\s|\r\n\s/g,"<br />&nbsp;");
        str = str.replace(/\s\s/g,"&nbsp;&nbsp;");
        return str;
    }

    //获取动态
    var page = 1;
    function getPost() {

        $.post('/post', {page:page}, function(res) {
            let data = res.data;
            let html = '';
            let lists = data.list;
            if (data.count > 0) {

                for(let i in lists){
                    let post_content = '<div class="p-5 pt-0 border-b dark:border-gray-700">\n' + HTMLDecode(lists[i].desc) +' </div>';
                    if (lists[i].media == 1) {
                        let post_file = lists[i].medias;
                        post_content += '<div uk-lightbox="">';

                        let img_count = post_file.length;
                        // console.log(img_count);
                        switch (img_count) {
                            case 1:
                                for (let i in post_file) {
                                    post_content += '<div class="flex" ><a class="w-full" href="'+post_file[i].url+'"><img class=" w-full h-full object-cover" src="'+post_file[i].url+'"></a></div>';
                                }
                                break;
                            case 2:
                                post_content += '<div class="flex h-full" >';
                                for (let i in post_file) {
                                    let className;
                                    if (i == 0) {
                                        className = 'pr-px';
                                    } else {
                                        className = 'pl-px';
                                    }
                                    post_content += '<a class="w-2/4" href="'+post_file[i].url+'"><img class=" w-full h-full object-cover '+ className +'" src="'+post_file[i].url+'"></a>';
                                }
                                post_content += '</div>';
                                break;
                            case 3:
                                let html2 = '<div class="flex" >';
                                for (let i in post_file) {
                                    let className;
                                    if (i == 0) {
                                        post_content += '<div class="flex" style="height: 232px;" ><a class=" w-full" href="'+post_file[i].url+'"><img class="pb-px w-full h-full rounded-b-none object-cover" src="'+post_file[i].url+'"></a></div>';
                                    } else {
                                        if (i == 1) {
                                            className = 'pr-px';
                                        } else {
                                            className = 'pl-px';
                                        }
                                        html2 += '<a class=" w-2/4" href="'+post_file[i].url+'"><img class="pt-px w-full h-full rounded-t-none object-cover '+ className +'" src="'+post_file[i].url+'"></a>';
                                    }
                                }
                                html2 += '</div>';
                                post_content += html2;
                                break;
                            case 4:
                                post_content += '<div class="flex" >';
                                let html3 = '</div><div class="flex" >';
                                for (let i in post_file) {
                                    let className;
                                    if (i < 2) {
                                        let className;
                                        if (i == 0) {
                                            className = 'pr-px';
                                        } else {
                                            className = 'pl-px';
                                        }
                                        post_content += '<a class=" w-2/4" href="'+post_file[i].url+'"><img class="pb-px w-full h-full rounded-b-none object-cover '+ className +'" src="'+post_file[i].url+'"></a>';
                                    } else {
                                        if (i == 2) {
                                            className = 'pr-px';
                                        } else {
                                            className = 'pl-px';
                                        }
                                        html3 += '<a class=" w-2/4" href="'+post_file[i].url+'"><img class="pt-px w-full h-full rounded-t-none object-cover '+ className +'" src="'+post_file[i].url+'"></a>';
                                    }
                                }
                                html3 += '</div>';
                                post_content += html3;

                                break;
                            case 5:

                                post_content += '<div class="flex" >';
                                let html4 = '</div><div class="flex" >';
                                for (let i in post_file) {
                                    let className;
                                    if (i < 2) {
                                        let className;
                                        if (i == 0) {
                                            // className = 'rounded-r-none';
                                        } else {
                                            // className = 'rounded-l-none';
                                        }
                                        post_content += '<a class=" w-2/4" href="'+post_file[i].url+'"><img class=" w-full h-full rounded-b-none object-cover '+ className +'" src="'+post_file[i].url+'"></a>';
                                    } else {
                                        if (i == 2) {
                                            className = 'rounded-r-none';
                                        } else if (i == 3) {
                                            className = 'rounded-r-none rounded-l-none';
                                        } else {
                                            className = 'rounded-l-none';
                                        }
                                        html4 += '<a class=" w-1/3" href="'+post_file[i].url+'"><img class=" w-full h-full rounded-t-none object-cover '+ className +'" src="'+post_file[i].url+'"></a>';
                                    }
                                }
                                html4 += '</div>';
                                post_content += html4;
                                break;
                            default:

                                post_content += '<div class="flex" >';
                                let html5 = '</div><div class="flex" >';
                                for (let i in post_file) {
                                    let className;
                                    if (i < 2) {
                                        let className;
                                        if (i == 0) {
                                            className = 'rounded-r-none';
                                        } else {
                                            className = 'rounded-l-none';
                                        }
                                        post_content += '<a class="w-2/4" href="'+post_file[i].url+'"><img class=" w-full h-full rounded-b-none object-cover '+ className +'" src="'+post_file[i].url+'"></a>';
                                    } else if (i > 1 && i < 5) {
                                        if (i == 2) {
                                            className = 'rounded-r-none';
                                        } else if (i == 3) {
                                            className = 'rounded-r-none rounded-l-none';
                                        } else {
                                            className = 'rounded-l-none';
                                        }
                                        if (i == 4) {
                                            html5 += '<div class=" w-1/3 relative"><a class=" w-full" href="'+post_file[i].url+'"><img class=" rounded-t-none object-cover w-full h-full '+ className +'" src="'+post_file[i].url+'"></a><div class="absolute w-full h-full top-0 items-center justify-center flex  rounded-l-none rounded-t-none" style="background-color: rgba(0,0,0,0.4)"><span class="text-white text-2xl">+'+ (img_count-5) +'</span></div></div>';
                                        } else {
                                            html5 += '<div class=" w-1/3"><a class=" w-full" href="'+post_file[i].url+'"><img class=" rounded-t-none object-cover w-full h-full '+ className +'" src="'+post_file[i].url+'"></a></div>';
                                        }
                                    } else {
                                        html5 += '<div class=" w-1/3" hidden><a class=" w-full" href="'+post_file[i].url+'"><img class=" rounded-t-none object-cover w-full h-full '+ className +'" src="'+post_file[i].url+'"></a></div>';
                                    }
                                }
                                html5 += '</div>';
                                post_content += html5;
                                break;
                        }
                        // for(let j in sub_list){
                        //     post_content += '<a href="'+ sub_list[j].url +'"><img src="'+ sub_list[j].url +'" alt="" class="max-h-96 w-full object-cover"></a>';
                        // }
                        post_content += '</div>';
                    } else if (lists[i].media == 2) {

                        let post_file = lists[i].medias;
                        post_content += '<div uk-lightbox="">';

                        for (let i in post_file) {
                            post_content += '<video class="video-ele w-full" src="'+post_file[i].url+'" controls  ></video>';
                        }
                        post_content += '</div>';
                    }
                    let comment_html = '';
                    let comment_list = lists[i].comment_list;
                    if (comment_list.length > 0) {
                        comment_html += '<div class="border-t py-4 space-y-4 dark:border-gray-600">\n';
                        for(let k in comment_list){
                            let author_html='',sub_html='';
                            if (comment_list[k].uid == lists[i].uid) {
                                author_html = '<span class="text-red-500 ml-2">作者</span>';
                            }
                            let sub_data = comment_list[k].sub;
                            if (sub_data.length > 0) {
                                for (let j in sub_data) {
                                    let rcontent = sub_data[j].huifu ? '回复 '+sub_data[j].huifu+'：'+sub_data[j].content : sub_data[j].content;
                                    sub_html += '<div class="flex mt-2 mb-2 comment-id-'+sub_data[j].id+'"><div class="w-10 h-10 rounded-full relative flex-shrink-0 py-2">\n' +
                                        '                                            <img src=" '+sub_data[j].headimg+'" alt="" class="absolute h-full rounded-full w-full"></div><div>\n' +
                                        '                                            <div class="text-gray-700 px-3 rounded-md relative lg:ml-3 ml-2 lg:mr-12 dark:text-gray-100">\n' +
                                        '                                                <div class="leading-6"> <p class="text-gray-500">'+sub_data[j].username+'</p> <p>'+rcontent+'</p></div>\n' +
                                        '                                                <div class="absolute w-3 h-3 top-3 -left-1 bg-gray-100 transform rotate-45 dark:bg-gray-800"></div>\n' +
                                        '                                            </div>\n' +
                                        '                                            <div class="text-xs flex items-center space-x-3 mt-2 ml-5">\n' +
                                        '                                                <a href="#" class=""> <i class="uil-heart"></i> 赞 </a><a href="javascript:;" onclick="replyComment('+lists[i].id+','+ sub_data[j].id +','+comment_list[k].id +',\''+sub_data[j].uid+'\',\''+sub_data[j].username+'\')"> 回复 </a><span> '+sub_data[j].addtime+' </span></div></div></div>'
                                }
                            }
                            comment_html += '<div class="flex comment-id-'+comment_list[k].id+'">\n' +
                                '                                        <div class="w-10 h-10 rounded-full relative flex-shrink-0 py-2">\n' +
                                '                                            <img src="'+ comment_list[k].headimg +'" alt="" class="absolute h-full rounded-full w-full">\n' +
                                '                                        </div>\n' +
                                '                                        <div class="sub-comment-cont">\n' +
                                '                                            <div class="text-gray-700 px-3 rounded-md relative lg:ml-3 ml-2 lg:mr-12 dark:text-gray-100">\n' +
                                '                                                <div class="leading-6"><p class="text-gray-500">'+ comment_list[k].username + author_html +'</p><p>'+ comment_list[k].content +'</p></div>\n' +
                                '                                                <div class="absolute w-3 h-3 top-3 -left-1 bg-gray-100 transform rotate-45 dark:bg-gray-800"></div>\n' +
                                '                                            </div>\n' +
                                '                                            <div class="text-sm flex items-center space-x-3 mt-2 ml-5">\n' +
                                '                                                <a href="#" class="'+ (comment_list[k].is_thumb==1?'text-red-600':'') +'"> <i class="uil-heart"></i> 赞 </a>\n' +
                                '                                                <a href="javascript:;" onclick="replyComment('+lists[i].id+','+lists[i].id+','+ comment_list[k].id +',\''+comment_list[k].uid+'\',\''+comment_list[k].username+'\')"> 回复 </a>\n' +
                                '                                                <span> '+ comment_list[k].addtime +' </span>\n' +
                                '                                            </div>\n' + sub_html +
                                '                                        </div>\n' +
                                '                                    </div>';
                        }
                        comment_html += '</div>';
                    } else {
                        comment_html += '<div class="border-t py-4 space-y-4 dark:border-gray-600" style="display: none;"></div>';
                    }
                    html += '<div class="card lg:mx-0 uk-animation-slide-bottom-small mb-5 overflow-visible">\n' +
                        '\n' +
                        '                            <!-- post header-->\n' +
                        '                            <div class="flex justify-between items-center lg:p-4 p-2.5">\n' +
                        '                                <div class="flex flex-1 items-center space-x-4">\n' +
                        '                                    <a href="/space/'+ lists[i].uid +'">\n' +
                        '                                        <img src="'+ lists[i].head_portrait +'" class="bg-gray-200 border border-white rounded-full w-10 h-10">\n' +
                        '                                    </a>\n' +
                        '                                    <div class="flex-1 font-semibold capitalize">\n' +
                        '                                        <a href="/space/'+ lists[i].uid +'" class="text-black dark:text-gray-100"> '+ lists[i].username +' </a>\n' +
                        '                                        <div class="text-gray-700 flex items-center space-x-2"> '+ lists[i].addtime +' <ion-icon name="people"></ion-icon></div>\n' +
                        '                                    </div>\n' +
                        '                                </div>\n' +
                        '                                <div>\n' +
                        '                                    <a href="#"> <i class="icon-feather-more-horizontal text-2xl hover:bg-gray-200 rounded-full p-2 transition -mr-1 dark:hover:bg-gray-700" onclick="showPostDo(this);"></i> </a>\n' +
                        '                                    <div class="bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-gray-500 hidden text-base border border-gray-100 dark:bg-gray-900 dark:text-gray-100 dark:border-gray-700"\n' +
                        '                                         uk-drop="mode: click;pos: bottom-right;animation: uk-animation-slide-bottom-small">\n' +
                        '\n' + (lists[i].uid == session_uid ? (
                            '                                        <ul class="space-y-1">\n' +
                            '                                            <li>\n' +
                            '                                                <a href="javascript:;" onclick="saved('+lists[i].id+')" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800">\n' +
                            '                                                    <i class="icon-feather-bookmark mr-1"></i> 收藏帖子\n' +
                            '                                                </a>\n' +
                            '                                            </li>\n' +
                            '                                            <li>\n' +
                            '                                                <a href="javascript:;" onclick="editPost('+lists[i].id+')" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800">\n' +
                            '                                                    <i class="uil-edit-alt mr-1"></i>  编辑帖子\n' +
                            '                                                </a>\n' +
                            '                                            </li>\n' +
                            '                                            <li>\n' +
                            '                                                <a href="javascript:;" onclick="editPost('+lists[i].id+')" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800">\n' +
                            '                                                    <i class="uil-eye mr-1"></i>   指定可见\n' +
                            '                                                </a>\n' +
                            '                                            </li>\n' +
                            '                                            <li>\n' +
                            '                                                <hr class="-mx-2 my-2 dark:border-gray-800">\n' +
                            '                                            </li>\n' +
                            '                                            <li>\n' +
                            '                                                <a href="javascript:;" onclick="delPost('+lists[i].id+')" class="flex items-center px-3 py-2 text-red-500 hover:bg-red-100 hover:text-red-500 rounded-md dark:hover:bg-red-600">\n' +
                            '                                                    <i class="uil-trash-alt mr-1"></i>  删除\n' +
                            '                                                </a>\n' +
                            '                                            </li>\n' +
                            '                                        </ul>\n' +
                            '\n'): (
                            '                                        <ul class="space-y-1">\n' +
                            '                                            <li>\n' +
                            '                                                <a href="javascript:;" onclick="saved('+lists[i].id+')" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800">\n' +
                            '                                                    <i class="icon-feather-bookmark mr-1"></i> 收藏帖子\n' +
                            '                                                </a>\n' +
                            '                                            </li>\n' +
                            '                                            <li>\n' +
                            '                                                <a href="javascript:;" onclick="report('+lists[i].id+', 1)" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800">\n' +
                            '                                                    <i class="icon-feather-alert-octagon mr-1"></i>  举报帖子\n' +
                            '                                                </a>\n' +
                            '                                            </li>\n' +
                            '                                        </ul>\n' +
                            '\n')) +
                        '                                    </div>\n' +
                        '                                </div>\n' +
                        '                            </div>\n' +
                        '\n' + post_content +
                        '\n' +
                        '\n' +
                        '                            <div class="p-4 space-y-3">\n' +
                        '\n' +
                        '                                <div class="flex space-x-4 lg:font-bold">\n' +
                        '                                    <a href="javascript:;" onclick="addZan(this,'+lists[i].id+','+(lists[i].thumb?1:0)+')" class="flex items-center space-x-2">\n' +
                        '                                        <div class="p-2 rounded-full  text-black  dark:bg-gray-600 '+ (lists[i].thumb?"bg-red-100 text-red-600":"lg:bg-gray-100")+'">\n' +
                        '                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="22" height="22" class="dark:text-gray-100">\n' +
                        '                                                <path d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z" />\n' +
                        '                                            </svg>\n' +
                        '                                        </div>\n' +
                        '                                        <div class="'+ (lists[i].thumb?"text-red-600":"")+'"> 赞</div>\n' +
                        '                                    </a>\n' +
                        '                                    <a href="javascript:;" onclick="replyComment('+lists[i].id+','+lists[i].id+',0,0,\'\')" class="flex items-center space-x-2 comment-target" data-id="'+lists[i].id+'">\n' +
                        '                                        <div class="p-2 rounded-full  text-black lg:bg-gray-100 dark:bg-gray-600">\n' +
                        '                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="22" height="22" class="dark:text-gray-100">\n' +
                        '                                                <path fill-rule="evenodd" d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z" clip-rule="evenodd" />\n' +
                        '                                            </svg>\n' +
                        '                                        </div>\n' +
                        '                                        <div> 评论</div>\n' +
                        '                                    </a>\n' +
                        '                                    <a href="#" class="flex items-center space-x-2 flex-1 justify-end " >\n' +
                        '                                        <div class="p-2 rounded-full  text-black lg:bg-gray-100 dark:bg-gray-600">\n' +
                        '                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="22" height="22" class="dark:text-gray-100">\n' +
                        '                                                <path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z" />\n' +
                        '                                            </svg>\n' +
                        '                                        </div>\n' +
                        '                                        <div> 分享</div>\n' +
                        '                                    </a><div uk-drop="mode: click;pos: top-center" class="card p-4 overflow-visible"><div class="share-2"></div></div>\n' +
                        '                                </div><div class="flex items-center" hidden><img src="http://demo.foxthemes.net/socialitev2.2/assets/images/avatars/avatar-1.jpg" alt="" class="w-6 h-6 rounded-full border-2 border-white dark:border-gray-900"><img src="http://demo.foxthemes.net/socialitev2.2/assets/images/avatars/avatar-4.jpg" alt="" class="w-6 h-6 rounded-full border-2 border-white dark:border-gray-900 -ml-2"><img src="http://demo.foxthemes.net/socialitev2.2/assets/images/avatars/avatar-2.jpg" alt="" class="w-6 h-6 rounded-full border-2 border-white dark:border-gray-900 -ml-2"></div>\n' + comment_html +
                        '                                <div class="bg-gray-100 rounded-full relative dark:bg-gray-800 border-t comment-box-'+lists[i].id+'" style="display: none;" >\n' +
                        '                                    <form class="comment-form" onsubmit="return submitComment(this,'+lists[i].id+','+ lists[i].uid +');" ><input placeholder="输入你的评论.." class="bg-transparent max-h-10 shadow-none px-5 comment-content"></form>\n' +
                        '                                    <div class="-m-0.5 absolute bottom-0 flex items-center right-3 text-xl">\n' +
                        '                                        <a href="#">\n' +
                        '                                            <ion-icon name="happy-outline" class="hover:bg-gray-200 p-1.5 rounded-full"></ion-icon>\n' +
                        '                                        </a>\n' +
                        '                                        <a href="#">\n' +
                        '                                            <ion-icon name="image-outline" class="hover:bg-gray-200 p-1.5 rounded-full"></ion-icon>\n' +
                        '                                        </a>\n' +
                        '                                        <a href="#">\n' +
                        '                                            <ion-icon name="link-outline" class="hover:bg-gray-200 p-1.5 rounded-full"></ion-icon>\n' +
                        '                                        </a>\n' +
                        '                                    </div>\n' +
                        '                                </div>\n' +
                        '\n' +
                        '                            </div>\n' +
                        '\n' +
                        '                        </div>';
                }

            } else {
                html = ' <div class="flex justify-center mt-6">暂无动态</div>';
                $('#getMore').hide();
            }
            if (data.pagecount > page) {
                page += 1;
            } else {
                $('#getMore').hide();
            }
            $('#postContent').append(html);
            $('.share-2').share({sites: ['qzone', 'qq', 'weibo','wechat'],wechatQrcodeHelper:''});
        }, 'json');

    }

    function showPostDo(t) {
        $('#postContent > .card').css('z-index',1);
        $(t).parent().parent().parent().parent().css('z-index',2);
    }

    //删除帖子窗口
    function delPost(id) {
        $('.saved_pid').val(id);
        UIkit.modal('#delete-post-modal').show();
    }

    function deletePost() {
        var data = {};
        data.id = $('.saved_pid').val();
        $.post('/post/delete', data, function(res) {
            if (res.code == 1) {
                layer.msg('删除帖子成功！',{time:1500},function(){
                    location.reload();
                });

            } else {
                layer.msg(res.msg);
            }
        }, 'json')

    }

    //编辑帖子窗口
    function editPost(id) {
        $('.saved_pid').val(id);
        $.post('/post/'+id, {}, function(res) {
            let post = res.data;
            $('#desc2').val(post.desc);
            $('#visible2').find('option[value="'+post.visible+'"]').attr("selected",true);
            $('#visible2').selectpicker('refresh');
        },'json')
        UIkit.modal('#edit-post-modal').show();
    }

    //更新帖子
    function updatePost() {
        var data = {};
        data.desc = $('#desc2').val();
        data.visible = $('#visible2').val();
        data.id = $('.saved_pid').val();
        data.photos = post_file;
        $.post('/post/update', data, function(res) {
            if (res.code == 1) {
                layer.msg('编辑帖子成功！',{time:1500},function(){
                    location.reload();
                });

            } else {
                layer.msg(res.msg);
            }
        }, 'json')
    }

    //举报窗口
    function report(id,type) {
        $('.saved_pid').val(id);
        $('.report_type').val(type);
        UIkit.modal('#report-post-modal').show();
    }

    //提交举报
    function reportPost() {

        var data = {};
        data.pid = $('.saved_pid').val();
        data.type = $('.report_type').val();
        data.reason = $('#savedReport').val();
        $.post('/report', data, function(res) {
            if (res.code == 1) {
                layer.msg('提交成功！',{time:1500},function(){
                    location.reload();
                });

            } else {
                layer.msg(res.msg);
            }
        }, 'json')
    }

    //打开收藏夹
    function saved(id) {
        $('.saved_pid').val(id);
        $.post('/getFolder', {}, function(res) {
            let lists = res.data.folders;
            let html = '<option value="">请选择</option>';
            for(let i in lists){
                html += '<option value="'+lists[i].id+'">'+lists[i].name+'</option>';
            }
            $('#savedFolder').html(html);
            $('#savedFolder').selectpicker('refresh');
        },'json')
        UIkit.modal('#saved-post-modal').show();
        // UIkit.modal.confirm('UIkit confirm!').then(function() {
        //     console.log('Confirmed.')
        // }, function () {
        //     console.log('Rejected.')
        // });
    }

    //添加到收藏夹
    function savedPost() {

        var data = {};
        data.pid = $('.saved_pid').val();
        data.sid = $('#savedFolder').val();
        $.post('/saved/push', data, function(res) {
            if (res.code == 1) {
                layer.msg('收藏成功！',{time:1500},function(){
                    location.reload();
                });

            } else {
                layer.msg(res.msg);
            }
        }, 'json')
    }

    function replyComment(pid,pid_sub,rid,touid,name) {
        let input = $('.comment-box-'+pid).find('.comment-content');
        $('.comment-box-'+pid).show();
        input.focus();
        if (name) {
            input.attr('placeholder','回复 '+name+'：');
        } else {
            input.attr('placeholder','输入评论');
        }
        input.data('pid',pid);
        input.data('pid_sub',pid_sub);
        input.data('rid',rid);
        input.data('touid',touid);
    }


</script>


</body>
</html>